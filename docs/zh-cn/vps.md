---
summary: "OpenClaw VPS 托管完全指南：云服务器部署策略、平台选择与远程访问配置"
read_when:
  - 需要在云端运行 OpenClaw Gateway 时
  - 需要了解各种 VPS/托管选项时
  - 需要远程访问 Gateway 时
  - 需要将节点与 VPS 结合使用时
title: "VPS 托管（VPS Hosting）"
---

# OpenClaw VPS 托管完全指南

## 学习目标

完成本章节学习后，你将能够：

### 基础目标（必掌握）

- [ ] 理解 **VPS 托管** 的概念和在 OpenClaw 中的应用场景
- [ ] 掌握主流云平台的部署方式和选择依据
- [ ] 理解云部署的基本架构和工作流程
- [ ] 能够配置远程访问连接到 VPS 上的 Gateway

### 进阶目标（建议掌握）

- [ ] 理解 Gateway 与节点的分布式架构
- [ ] 掌握不同远程访问方式（Tailscale、SSH 隧道）的配置
- [ ] 理解安全最佳实践和配置要求

### 专家目标（挑战）

- [ ] 能够设计高可用的 OpenClaw 部署架构
- [ ] 理解成本优化策略和多区域部署
- [ ] 掌握故障转移和备份策略

---

## 第一部分：VPS 托管概述

### 1.1 什么是 VPS 托管？

**核心定义**：VPS（Virtual Private Server，虚拟专用服务器）托管是指在云服务器上运行 OpenClaw Gateway，而非在本地设备上运行。

```
本地部署 vs VPS 托管对比：

┌─────────────────────────────────────────────────────────┐
│                   本地部署                              │
│  ┌─────────────┐                                     │
│  │   Gateway   │ ← 运行在用户设备                      │
│  └──────┬──────┘                                     │
│         │                                              │
│         ▼                                              │
│  ┌─────────────┐                                     │
│  │  本地资源   │  ← 使用本地 CPU、内存、带宽           │
│  └─────────────┘                                     │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                   VPS 托管                              │
│  ┌─────────────┐                                     │
│  │   Gateway   │ ← 运行在云服务器                      │
│  └──────┬──────┘                                     │
│         │                                              │
│         ▼                                              │
│  ┌─────────────┐                                     │
│  │  云端资源   │  ← 使用云端 CPU、内存、带宽           │
│  └─────────────┘                                     │
│         │                                              │
│         ▼                                              │
│  ┌─────────────┐                                     │
│  │  用户设备    │  ← 通过远程连接访问                   │
│  └─────────────┘                                     │
└─────────────────────────────────────────────────────────┘
```

### 1.2 为什么选择 VPS 托管？

**核心优势**：

| 优势 | 说明 | 适用场景 |
|------|------|----------|
| **24/7 运行** | 服务器持续在线，无需本地设备开机 | 随时响应消息 |
| **固定 IP** | 拥有固定公网 IP | 稳定访问渠道 |
| **更强性能** | 云服务器配置更高 | 处理复杂任务 |
| **全球访问** | 从任何地方连接 | 远程工作 |
| **带宽优势** | 通常有更大带宽 | 传输大文件 |

**潜在挑战**：

| 挑战 | 说明 | 应对策略 |
|------|------|----------|
| **成本** | 需要支付服务器费用 | 选择适合的配置 |
| **延迟** | 网络延迟可能较高 | 选择靠近用户的区域 |
| **复杂性** | 需要服务器管理技能 | 使用托管服务 |
| **安全性** | 需要保护服务器安全 | 遵循安全最佳实践 |

### 1.3 适用场景分析

```
使用场景矩阵：

                    设备条件
                    差 ────────── 好
              ┌─────────────────────────────────┐
        需要   │  强烈推荐    │  推荐         │   本地优先
   24/7 运行   │  VPS 托管    │  VPS + 节点   │   本地运行
              │ ──────────── │ ──────────── │ ────────────
        移动   │  远程访问    │  均可        │   均可
   设备使用    │  VPS 为主    │              │
              │ ──────────── │ ──────────── │ ────────────
        高性能   │  VPS 托管    │  VPS 托管    │   本地优先
   需求        │              │  + 本地节点   │   或 VPS
              └─────────────────────────────────┘

推荐配置：
- 长期在线 + 固定 IP → VPS 托管
- 本地设备功能 + 远程访问 → VPS + 节点
- 偶尔使用 + 本地资源充足 → 本地部署
```

---

## 第二部分：平台选择指南

### 2.1 平台对比总览

| 平台 | 类型 | 价格 | 特点 | 难度 |
|------|------|------|------|------|
| Railway | PaaS | 中等 | 一键部署 | ⭐ |
| Northflank | PaaS | 中等 | 一键部署 | ⭐ |
| Oracle Cloud | IaaS | 免费* | Always Free | ⭐⭐⭐ |
| Fly.io | PaaS | 中等 | 全球分布 | ⭐⭐ |
| Hetzner | IaaS | 低 | 高性价比 | ⭐⭐⭐ |
| GCP | IaaS | 中等/高 | 企业级 | ⭐⭐⭐ |
| AWS | IaaS | 高 | 功能最全 | ⭐⭐⭐⭐ |
| exe.dev | 托管 | 中等 | VM + HTTPS | ⭐⭐ |

* Oracle Cloud 的 Always Free 套餐包含永久免费的 ARM VPS

### 2.2 一键部署平台

#### 2.2.1 Railway

**特点**：

- 最简单的部署方式
- 自动构建和部署
- 内置 HTTPS
- 适合快速上手

**部署步骤**：

```
Railway 部署流程：

    ┌─────────────────────────────────────┐
    │  1. 创建 Railway 账号               │
    │  https://railway.app               │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  2. 连接 GitHub 仓库                │
    │  选择 openclaw/openclaw              │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  3. 配置环境变量                    │
    │  - TELEGRAM_BOT_TOKEN              │
    │  - OPENAI_API_KEY                  │
    │  - ...                              │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  4. 部署完成                        │
    │  Railway 自动构建并提供 HTTPS 地址   │
    └─────────────────────────────────────┘
```

#### 2.2.2 Northflank

**特点**：

- 类似 Railway
- 更灵活的构建选项
- 支持私有仓库

**部署步骤**：与 Railway 类似，通过 Web 界面连接仓库并配置。

### 2.3 免费/低成本平台

#### 2.3.1 Oracle Cloud Always Free

**特点**：

- 永久免费 ARM VPS（2 CPU + 24GB RAM）
- 包含 200Mbps 带宽
- 需要信用卡注册（验证身份）
- 容量/注册可能需要等待

**推荐配置**：

```
Oracle Cloud VPS 推荐配置：

┌─────────────────────────────────────────────────────────┐
│  实例配置                                                │
│  ├─ 形状：VM.Standard.A1.Flex                         │
│  ├─ CPU：2 核心                                        │
│  ├─ 内存：12 GB                                        │
│  └─ 操作系统：Ubuntu 22.04 LTS                        │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  网络配置                                                │
│  ├─ 公共 IP：自动分配                                   │
│  ├─ 端口开放：22, 443, 18789                          │
│  └─ 安全列表：添加入口规则                              │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  成本                                                   │
│  ├─ 基础实例：免费（Always Free）                      │
│  ├─ 存储：约 $5-10/月（可选）                          │
│  └─ 总计：$0（基础配置）                              │
└─────────────────────────────────────────────────────────┘
```

**注册与部署注意事项**：

| 阶段 | 常见问题 | 解决方案 |
|------|----------|----------|
| 注册 | 信用卡验证失败 | 联系客服或尝试其他卡片 |
| 注册 | 区域不可用 | 选择其他区域 |
| 创建 | 配额不足 | 申请增加配额 |
| 部署 | 性能问题 | 调整实例大小 |

### 2.4 高性价比平台

#### 2.4.1 Hetzner Cloud

**特点**：

- 价格最低（$5-10/月）
- 德国/芬兰数据中心
- Linux 原生支持好
- 社区活跃

**推荐配置**：

```
Hetzner VPS 推荐配置：

┌─────────────────────────────────────────────────────────┐
│  CX11 (入门)                                            │
│  ├─ CPU：1 vCPU                                        │
│  ├─ 内存：2 GB                                         │
│  ├─ 存储：20 GB SSD                                    │
│  ├─ 带宽：20 TB                                        │
│  └─ 价格：€3.15/月                                    │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  CX22 (推荐)                                           │
│  ├─ CPU：2 vCPU                                        │
│  ├─ 内存：4 GB                                         │
│  ├─ 存储：40 GB SSD                                    │
│  ├─ 带宽：20 TB                                        │
│  └─ 价格：€5.89/月                                    │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  CX32 (高性能)                                         │
│  ├─ CPU：4 vCPU                                        │
│  ├─ 内存：8 GB                                         │
│  ├─ 存储：80 GB SSD                                    │
│  ├─ 带宽：20 TB                                        │
│  └─ 价格：€11.39/月                                   │
└─────────────────────────────────────────────────────────┘
```

#### 2.4.2 DigitalOcean

**特点**：

- 开发者友好
- 丰富的文档
- 全球数据中心
- 包含 IPv6

**推荐配置**：

| 配置 | CPU | 内存 | 存储 | 价格 |
|------|-----|------|------|------|
| Basic | 1 vCPU | 1 GB | 25 GB SSD | $4/月 |
| Basic | 2 vCPU | 2 GB | 50 GB SSD | $10/月 |
| General | 2 vCPU | 4 GB | 80 GB SSD | $20/月 |

### 2.5 企业级平台

#### 2.5.1 Google Cloud Platform (GCP)

**特点**：

- 企业级可靠性
- 丰富的数据中心
- 整合 Google 服务
- 免费额度丰富

**推荐服务**：

| 服务 | 用途 | 免费额度 |
|------|------|----------|
| Compute Engine | VPS | $300 试用 |
| Cloud Run | 容器部署 | 200 万请求/月 |
| Artifact Registry | 镜像存储 | 500 MB |

#### 2.5.2 AWS

**特点**：

- 功能最全面
- 全球最大云平台
- 学习资源丰富
- 按需付费灵活

**推荐服务**：

| 服务 | 用途 | 说明 |
|------|------|------|
| EC2 | VPS | 多种实例类型 |
| Lightsail | 简化 VPS | 固定价格套餐 |
| Elastic Beanstalk | 部署 | 简化部署 |
| Lambda | 无服务器 | 事件驱动 |

---

## 第三部分：云端 Gateway 工作原理

### 3.1 架构概述

```
云部署架构图：

┌─────────────────────────────────────────────────────────┐
│                     云服务器 (VPS)                       │
│  ┌─────────────────────────────────────────────────┐  │
│  │                  Gateway                          │  │
│  │  ┌─────────────────────────────────────────┐  │  │
│  │  │  ┌───────────────────────────────────┐  │  │  │
│  │  │  │           Agent                    │  │  │  │
│  │  │  └───────────────────────────────────┘  │  │  │
│  │  └─────────────────────────────────────────┘  │  │
│  │                                                 │  │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  │  │
│  │  │ Channels  │  │   Tools   │  │ Sessions  │  │  │
│  │  └───────────┘  └───────────┘  └───────────┘  │  │
│  └─────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
         │                                      │
         │ HTTPS / WebSocket                      │
         ▼                                      │
┌─────────────────────────────────────────────────────────┐
│                   远程访问层                             │
│  ┌───────────────────┐  ┌───────────────────────────┐ │
│  │  Tailscale Serve  │  │      SSH 隧道              │ │
│  │  或 Funnel        │  │      或 VPN                │ │
│  └───────────────────┘  └───────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
         │                                      │
         ▼                                      ▼
┌─────────────────────────┐        ┌─────────────────────────┐
│     用户设备 A           │        │       用户设备 B        │
│  - TUI                  │        │  - Web UI              │
│  - Web Chat             │        │  - CLI                  │
│  - Mobile App           │        │  - Mobile App           │
└─────────────────────────┘        └─────────────────────────┘
```

### 3.2 关键组件

| 组件 | 位置 | 说明 |
|------|------|------|
| Gateway | 云服务器 | 核心控制平面，处理所有请求 |
| Agent | 云服务器 | AI 推理运行时 |
| Channels | 云服务器 | 消息渠道连接 |
| Tools | 云服务器 | 本地/远程工具执行 |
| Sessions | 云服务器 | 会话状态管理 |

### 3.3 数据流

```
消息处理流程：

    ┌─────────────────────────────────────────────────────────┐
    │  1. 用户通过远程连接发送消息                            │
    │     （TUI / Web UI / 消息渠道）                         │
    └─────────────────────────────────────────────────────────┘
                              │
                              ▼
    ┌─────────────────────────────────────────────────────────┐
    │  2. 消息到达云端 Gateway                                 │
    └─────────────────────────────────────────────────────────┘
                              │
                              ▼
    ┌─────────────────────────────────────────────────────────┐
    │  3. Gateway 路由到 Agent，处理消息                       │
    │     - 加载会话上下文                                    │
    │     - 调用 AI 模型生成回复                               │
    │     - 执行必要的工具调用                                 │
    └─────────────────────────────────────────────────────────┘
                              │
                              ▼
    ┌─────────────────────────────────────────────────────────┐
    │  4. 返回回复                                            │
    │     - 如果启用传递，发送到消息渠道                      │
    │     - 同时返回给用户设备                                 │
    └─────────────────────────────────────────────────────────┘
```

---

## 第四部分：远程访问配置

### 4.1 访问方式对比

| 方式 | 安全性 | 便捷性 | 适用场景 |
|------|--------|--------|----------|
| **Tailscale Serve** | 高 | 高 | 首选方案 |
| **Tailscale Funnel** | 中 | 最高 | 公开访问 |
| **SSH 隧道** | 高 | 中 | 技术用户 |
| **VPN** | 高 | 低 | 企业环境 |

### 4.2 Tailscale 访问（推荐）

#### 4.2.1 Serve 模式

**特点**：

- 仅限 Tailscale 网络内访问
- 自动 HTTPS
- 使用 Tailscale 身份验证

**配置**：

```bash
# 在 VPS 上配置
openclaw gateway --bind loopback --port 18789

# 配置 Tailscale Serve（需要 Tailscale CLI）
tailscale serve https://localhost:18789 --to 127.0.0.1:18789

# 或者使用 OpenClaw 自动配置
# 设置 gateway.tailscale.mode = "serve" in config
```

**使用**：

```bash
# 从其他 Tailscale 设备访问
openclaw tui --url https://<vps-name>.ts.net:443
```

#### 4.2.2 Funnel 模式

**特点**：

- 公开互联网访问
- 需要密码认证
- 使用 HTTPS

**配置**：

```json5
{
  gateway: {
    tailscale: {
      mode: "funnel"
    },
    auth: {
      mode: "password"  // Funnel 必须密码认证
    }
  }
}
```

**使用**：

```bash
# 公开访问 URL
# https://<vps-name>.ts.net:443
```

### 4.3 SSH 隧道

#### 4.3.1 本地端口转发

**从本地连接**：

```bash
# 创建 SSH 隧道
ssh -L 18789:localhost:18789 user@vps-host

# 保持隧道连接（后台运行）
ssh -f -N -L 18789:localhost:18789 user@vps-host

# 或使用 autossh 自动重连
autossh -M 0 -N -L 18789:localhost:18789 user@vps-host
```

**从 TUI 连接**：

```bash
# 通过隧道连接
openclaw tui --url ws://127.0.0.1:18789
```

#### 4.3.2 远程端口转发

**在 VPS 上配置**：

```bash
# 允许远程转发
# /etc/ssh/sshd_config:
# GatewayPorts yes

# 从 VPS 发起转发
ssh -R 18789:localhost:18789 user@local-machine
```

### 4.4 安全配置

#### 4.4.1 认证方式

| 方式 | 配置 | 安全性 |
|------|------|--------|
| 令牌 | `--token <token>` | 高 |
| 密码 | `--password <password>` | 中 |
| 无认证 | 仅限本地访问 | N/A |

**推荐配置**：

```json5
{
  gateway: {
    // 绑定本地端口
    bind: "127.0.0.1",
    port: 18789,

    // 认证配置
    auth: {
      // 使用令牌认证
      mode: "token",
      token: "${OPENCLAW_GATEWAY_TOKEN}"
    },

    // 远程访问
    remote: {
      // 允许远程连接
      allowed: ["10.0.0.0/8", "192.168.0.0/16"]
    }
  }
}
```

#### 4.4.2 网络安全

```
安全层级：

┌─────────────────────────────────────────────────────────┐
│  第 1 层：系统防火墙                                    │
│  ├─ 只开放必要端口（22, 443, 18789）                   │
│  ├─ 限制来源 IP（如果可能）                             │
│  └─ 使用 ufw/iptables                                 │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  第 2 层：Tailscale ACL                                 │
│  ├─ 限制谁可以访问 Gateway                              │
│  ├─ 设置设备标签                                        │
│  └─ 定义访问策略                                        │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  第 3 层：Gateway 认证                                  │
│  ├─ 强制使用令牌/密码认证                              │
│  ├─ 设置会话超时                                        │
│  └─ 记录访问日志                                        │
└─────────────────────────────────────────────────────────┘
```

---

## 第五部分：节点与 VPS 结合

### 5.1 混合架构

**核心概念**：Gateway 运行在云端，节点运行在本地设备，结合两者优势。

```
混合架构图：

┌─────────────────────────────────────────────────────────┐
│                      云服务器 (Gateway)                  │
│  ┌─────────────────────────────────────────────────┐  │
│  │  Gateway（状态、工作区、渠道连接）                  │  │
│  └─────────────────────────────────────────────────┘  │
│                         │                               │
│                         │ WebSocket                    │
│                         ▼                               │
│  ┌─────────────────────────────────────────────────┐  │
│  │                    节点管理                        │  │
│  └─────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
         │                    │                    │
         │ WebSocket          │                    │
         ▼                    ▼                    ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│   macOS 节点     │  │    iOS 节点     │  │  Android 节点   │
│  - 系统执行      │  │  - 相机         │  │  - 相机         │
│  - 屏幕录制      │  │  - 屏幕录制     │  │  - 屏幕录制     │
│  - 通知          │  │  - 语音唤醒     │  │  - 语音唤醒     │
│  - Canvas       │  │  - Canvas       │  │  - Canvas      │
└─────────────────┘  └─────────────────┘  └─────────────────┘

职责分工：
- Gateway（云端）：状态管理、AI 推理、渠道连接
- 节点（本地）：设备本地操作（需要本地资源的任务）
```

### 5.2 节点功能对比

| 功能 | macOS 节点 | iOS 节点 | Android 节点 |
|------|-----------|----------|--------------|
| system.run | ✅ | ❌ | ❌ |
| system.notify | ✅ | ❌ | ❌ |
| canvas | ✅ | ✅ | ✅ |
| camera | ✅ | ✅ | ✅ |
| screen.record | ✅ | ✅ | ✅ |
| location.get | ✅ | ✅ | ✅ |
| voicewake | ✅ | ✅ | ✅ |
| talk | ✅ | ✅ | ✅ |

### 5.3 节点配置

**节点配对流程**：

```
节点配对流程：

    ┌─────────────────────────────────────┐
    │  1. 在 Gateway 上启用配对           │
    │  openclaw nodes pair                │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  2. 获取配对二维码/链接              │
    │  或直接输入配对码                    │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  3. 在节点设备上确认配对            │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  4. 配对完成                        │
    │  节点出现在节点列表中                 │
    └─────────────────────────────────────┘
```

**查看节点**：

```bash
# 列出已配对的节点
openclaw nodes list

# 查看节点状态
openclaw nodes status <node-id>

# 移除节点
openclaw nodes remove <node-id>
```

---

## 第六部分：运维最佳实践

### 6.1 备份策略

```
备份层级：

┌─────────────────────────────────────────────────────────┐
│  配置备份                                               │
│  ├─ ~/.openclaw/openclaw.json                         │
│  ├─ ~/.openclaw/credentials/                          │
│  └─ 渠道认证文件                                       │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  工作区备份                                            │
│  ├─ ~/.openclaw/workspace/                            │
│  ├─ memory/                                           │
│  └─ MEMORY.md                                         │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  会话状态备份                                           │
│  ├─ ~/.openclaw/sessions/                             │
│  └─ ~/.openclaw/transcripts/                          │
└─────────────────────────────────────────────────────────┘
```

**备份命令**：

```bash
# 手动备份
tar -czvf ~/backup/openclaw-$(date +%Y%m%d).tar.gz \
  ~/.openclaw/openclaw.json \
  ~/.openclaw/credentials/ \
  ~/.openclaw/workspace/

# 自动备份脚本
# 可以设置为 cron 任务
```

### 6.2 监控与告警

```
监控指标：

┌─────────────────────────────────────────────────────────┐
│  系统指标                                               │
│  ├─ CPU 使用率                                         │
│  ├─ 内存使用率                                         │
│  ├─ 磁盘使用率                                         │
│  ├─ 网络带宽                                           │
│  └─ 进程状态                                           │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  应用指标                                               │
│  ├─ Gateway 连接数                                     │
│  ├─ 消息处理延迟                                       │
│  ├─ AI 模型响应时间                                    │
│  ├─ 错误率                                            │
│  └─ 会话数量                                           │
└─────────────────────────────────────────────────────────┘
```

**监控命令**：

```bash
# 检查系统资源
htop
df -h
free -m

# 检查 OpenClaw 状态
openclaw status
openclaw health

# 查看日志
openclaw logs --follow
```

### 6.3 更新策略

```
更新流程：

    ┌─────────────────────────────────────┐
    │  1. 检查更新                        │
    │  openclaw update --check            │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  2. 备份配置                        │
    │  备份重要文件                        │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  3. 执行更新                        │
    │  openclaw update                    │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  4. 重启 Gateway                    │
    │  openclaw gateway restart            │
    └─────────────────┬───────────────────┘
                      ▼
    ┌─────────────────────────────────────┐
    │  5. 验证功能                        │
    │  检查各渠道连接                       │
    └─────────────────────────────────────┘
```

---

## 第七部分：故障排查

### 7.1 常见问题

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| 无法连接 Gateway | Gateway 未运行 | 检查进程：`pgrep -f openclaw` |
| 连接超时 | 网络/防火墙问题 | 检查端口开放：`ss -ltnp` |
| 认证失败 | 令牌/密码错误 | 检查认证配置 |
| 消息无响应 | Gateway 阻塞 | 查看日志：`openclaw logs` |
| 性能差 | 资源不足 | 升级 VPS 配置 |

### 7.2 诊断命令

```bash
# 检查 Gateway 进程
pgrep -af "openclaw"

# 检查端口监听
ss -ltnp | grep 18789

# 测试网络连接
curl -v ws://127.0.0.1:18789

# 查看错误日志
tail -n 100 /var/log/openclaw/error.log

# 系统资源
top -bn1 | head -20
df -h
free -h
```

### 7.3 重启流程

```bash
# 停止 Gateway
pkill -9 -f "openclaw gateway"

# 或使用 systemctl（如果配置了服务）
systemctl stop openclaw-gateway

# 启动 Gateway
nohup openclaw gateway run --bind loopback --port 18789 > /tmp/openclaw.log 2>&1 &

# 验证
sleep 2
openclaw status
```

---

## 总结与进阶

### 知识点回顾

本章节的核心知识点包括：

1. **VPS 托管概念**：理解云端部署的价值和挑战
2. **平台选择**：掌握各平台的特点和选择依据
3. **架构理解**：理解 Gateway 云端运行的架构设计
4. **远程访问**：掌握 Tailscale 和 SSH 隧道配置
5. **混合架构**：理解 Gateway + 节点的分工模式
6. **运维实践**：掌握备份、监控和更新策略

### 学习成果检验

完成本章节学习后，你应该能够：

- [ ] 根据需求选择合适的 VPS 平台
- [ ] 在云服务器上部署和配置 Gateway
- [ ] 配置安全的远程访问方式
- [ ] 实现 Gateway + 节点的混合架构
- [ ] 实施备份和监控策略

### 下一步学习

- **平台详细指南**：选择平台后，参考对应平台的详细部署文档
- **安全加固**：[Gateway 安全指南](/gateway/security) — 了解安全最佳实践
- **节点配置**：[节点 CLI](/cli/nodes) — 了解节点管理命令
- **Tailscale**：[Tailscale 集成](/gateway/tailscale) — 了解高级配置

---

## 附录

### 平台速查表

| 平台 | 类型 | 价格范围 | 难度 | 推荐场景 |
|------|------|----------|------|----------|
| Railway | PaaS | 中等 | ⭐ | 快速上手 |
| Northflank | PaaS | 中等 | ⭐ | 快速上手 |
| Oracle Cloud | IaaS | 免费 | ⭐⭐⭐ | 预算有限 |
| Fly.io | PaaS | 中等 | ⭐⭐ | 全球分布 |
| Hetzner | IaaS | 低 | ⭐⭐⭐ | 高性价比 |
| GCP | IaaS | 中/高 | ⭐⭐⭐ | 企业需求 |
| AWS | IaaS | 高 | ⭐⭐⭐⭐ | 企业需求 |
| exe.dev | 托管 | 中等 | ⭐⭐ | 简化部署 |

### 相关链接

- [Gateway 远程访问](/gateway/remote) — 远程访问详细配置
- [Tailscale 集成](/gateway/tailscale) — Tailscale 高级配置
- [节点 CLI](/cli/nodes) — 节点管理
- [安全指南](/gateway/security) — 安全最佳实践
- [平台文档](/platforms) — 各平台详细部署指南

---

_文档版本：v2.0_
_最后更新：2026-02-05_
