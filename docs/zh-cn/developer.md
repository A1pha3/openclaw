---
summary: "å¼€å‘è€…å®Œæ•´æŒ‡å—â€”â€”OpenClaw å¼€å‘ç¯å¢ƒæ­å»ºã€é¡¹ç›®ç»“æ„è§£æã€æ’ä»¶å¼€å‘å’Œä»£ç è´¡çŒ®æŒ‡å—"
read_when:
  - å¼€å§‹ OpenClaw æœ¬åœ°å¼€å‘
  - ç†è§£é¡¹ç›®ä»£ç ç»“æ„
  - å¼€å‘è‡ªå®šä¹‰æ’ä»¶å’Œæ‰©å±•
  - ä¸º OpenClaw é¡¹ç›®è´¡çŒ®ä»£ç 
title: "å¼€å‘è€…æ¦‚è¿°"
---

# ğŸ‘¨â€ğŸ’» å¼€å‘è€…æ¦‚è¿°

æ¬¢è¿å‚ä¸ OpenClaw å¼€å‘ï¼OpenClaw æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ¬¢è¿å¼€å‘è€…å‚ä¸è´¡çŒ®æ— è®ºæ˜¯ä¿®å¤ bugã€æ·»åŠ æ–°åŠŸèƒ½è¿˜æ˜¯æ”¹è¿›æ–‡æ¡£ã€‚æœ¬æ–‡æ¡£å°†å¸®åŠ©ä½ æ­å»ºå¼€å‘ç¯å¢ƒã€ç†è§£é¡¹ç›®ç»“æ„ã€æŒæ¡å¼€å‘æµç¨‹ï¼Œå¹¶é¡ºåˆ©å‚ä¸åˆ° OpenClaw çš„å¼€å‘å·¥ä½œä¸­ã€‚é€šè¿‡é˜…è¯»æœ¬æ–‡æ¡£ï¼Œä½ å°†èƒ½å¤Ÿæœ¬åœ°è¿è¡Œå¼€å‘ç‰ˆæœ¬ã€é˜…è¯»å’Œç†è§£æ ¸å¿ƒä»£ç ã€å¼€å‘è‡ªå®šä¹‰æ’ä»¶ï¼Œå¹¶æŒ‰ç…§ç¤¾åŒºè§„èŒƒè´¡çŒ®ä»£ç ã€‚

> **å¼€æºåä½œçš„ä»·å€¼**
>
> OpenClaw çš„æ„¿æ™¯æ˜¯æ„å»ºæœ€å¼ºå¤§çš„ä¸ªäºº AI åŠ©æ‰‹ï¼Œè¿™ä¸ªç›®æ ‡éœ€è¦ç¤¾åŒºçš„å…±åŒåŠªåŠ›æ‰èƒ½å®ç°ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä½ å°†ç›´æ¥å‚ä¸åˆ°è¿™ä¸€æ¿€åŠ¨äººå¿ƒçš„é¡¹ç›®ä¸­ï¼šä½ çš„ä»£ç å°†è¢«å…¨çƒç”¨æˆ·ä½¿ç”¨ï¼›ä½ çš„åˆ›æ„å°†å¡‘é€ äº§å“çš„æœªæ¥ï¼›ä½ çš„è´¡çŒ®å°†è¢«ç¤¾åŒºè®¤å¯å’Œé“­è®°ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„ OpenClawï¼

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« èŠ‚å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š

### åŸºç¡€ç›®æ ‡ï¼ˆå¿…æŒæ¡ï¼‰

- æ­å»ºå®Œæ•´çš„æœ¬åœ°å¼€å‘ç¯å¢ƒ
- ä»æºç ç¼–è¯‘å’Œè¿è¡Œ OpenClaw
- ç†è§£é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œä»£ç ç»„ç»‡
- è¿è¡Œæµ‹è¯•å’Œä»£ç æ£€æŸ¥

### è¿›é˜¶ç›®æ ‡ï¼ˆå»ºè®®æŒæ¡ï¼‰

- å¼€å‘è‡ªå®šä¹‰æ¸ é“æ’ä»¶
- å¼€å‘è‡ªå®šä¹‰å·¥å…·å’ŒæŠ€èƒ½
- ç†è§£æ ¸å¿ƒæ¨¡å—çš„å®ç°åŸç†
- é˜…è¯»å’Œç†è§£ API æ–‡æ¡£

### ä¸“å®¶ç›®æ ‡ï¼ˆæŒ‘æˆ˜ï¼‰

- ä¸ºæ ¸å¿ƒæ¨¡å—è´¡çŒ®ä»£ç 
- è®¾è®¡æ–°åŠŸèƒ½å’Œæ¶æ„æ”¹è¿›
- å®¡æŸ¥ä»–äººçš„ Pull Request
- å‚ä¸é¡¹ç›®ç®¡ç†å†³ç­–

---

## ğŸ—ºï¸ å­¦ä¹ è·¯å¾„

æ ¹æ®ä½ çš„ç»éªŒæ°´å¹³å’Œè´¡çŒ®ç›®æ ‡ï¼Œé€‰æ‹©æœ€é€‚åˆçš„å­¦ä¹ è·¯å¾„ï¼š

| å­¦ä¹ è·¯å¾„ | é€‚åˆäººç¾¤ | é¢„è®¡æ—¶é—´ | æ ¸å¿ƒå†…å®¹ |
|----------|----------|----------|----------|
| **å¿«é€Ÿä¸Šæ‰‹** | é¦–æ¬¡å‚ä¸å¼€å‘ | 1 å°æ—¶ | ç¯å¢ƒæ­å»ºã€è¿è¡Œå¼€å‘ç‰ˆæœ¬ |
| **æ—¥å¸¸å¼€å‘** | å¸¸è§„åŠŸèƒ½å¼€å‘ | 2 å°æ—¶ | ä»£ç ç»“æ„ã€å¼€å‘æµç¨‹ |
| **æ’ä»¶å¼€å‘** | å¼€å‘æ‰©å±•åŠŸèƒ½ | 4 å°æ—¶ | æ’ä»¶ç³»ç»Ÿã€è‡ªå®šä¹‰å¼€å‘ |
| **æ ¸å¿ƒè´¡çŒ®** | è´¡çŒ®æ ¸å¿ƒä»£ç  | 8 å°æ—¶ | æ ¸å¿ƒæ¨¡å—ã€æ¶æ„è®¾è®¡ |

---

## ğŸ§  åŸç†è§£é‡Šï¼šOpenClaw é¡¹ç›®æ¶æ„

### é¡¹ç›®æ•´ä½“ç»“æ„

OpenClaw é‡‡ç”¨ Monorepo æ¶æ„ï¼Œå°†æ ¸å¿ƒåŠŸèƒ½ã€æ’ä»¶å’Œå·¥å…·æ•´åˆåœ¨ä¸€ä¸ªä»£ç åº“ä¸­ï¼š

```
openclaw/
â”œâ”€â”€ src/                          # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ agents/                   # AI ä»£ç†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ core/               # ä»£ç†æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ runtime/            # è¿è¡Œæ—¶ç¯å¢ƒ
â”‚   â”‚   â””â”€â”€ tools/              # å†…ç½®å·¥å…·å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ channels/               # æ¶ˆæ¯æ¸ é“å®ç°
â”‚   â”‚   â”œâ”€â”€ telegram/          # Telegram æ¸ é“
â”‚   â”‚   â”œâ”€â”€ whatsapp/          # WhatsApp æ¸ é“
â”‚   â”‚   â”œâ”€â”€ slack/             # Slack æ¸ é“
â”‚   â”‚   â””â”€â”€ ...                # å…¶ä»–æ¸ é“
â”‚   â”‚
â”‚   â”œâ”€â”€ gateway/                # Gateway æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ server/            # æœåŠ¡å™¨å®ç°
â”‚   â”‚   â”œâ”€â”€ routing/           # æ¶ˆæ¯è·¯ç”±
â”‚   â”‚   â””â”€â”€ auth/              # è®¤è¯æˆæƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ cli/                   # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ commands/          # CLI å‘½ä»¤
â”‚   â”‚   â””â”€â”€ utils/             # CLI å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                 # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ builtin/           # å†…ç½®å·¥å…·
â”‚   â”‚   â””â”€â”€ sdk/               # å·¥å…·å¼€å‘ SDK
â”‚   â”‚
â”‚   â””â”€â”€ providers/             # AI æä¾›å•†
â”‚       â”œâ”€â”€ anthropic/         # Anthropic Claude
â”‚       â”œâ”€â”€ openai/            # OpenAI GPT
â”‚       â””â”€â”€ ...                # å…¶ä»–æä¾›å•†
â”‚
â”œâ”€â”€ extensions/                 # æ’ä»¶ç›®å½•
â”‚   â”œâ”€â”€ msteams/               # Microsoft Teams æ’ä»¶
â”‚   â”œâ”€â”€ matrix/                # Matrix æ’ä»¶
â”‚   â””â”€â”€ ...                    # å…¶ä»–æ’ä»¶
â”‚
â”œâ”€â”€ packages/                   # å…±äº«åŒ…
â”‚   â”œâ”€â”€ core-sdk/              # æ ¸å¿ƒ SDK
â”‚   â”œâ”€â”€ channel-sdk/           # æ¸ é“ SDK
â”‚   â””â”€â”€ plugin-sdk/            # æ’ä»¶ SDK
â”‚
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ zh-cn/                 # ä¸­æ–‡æ–‡æ¡£
â”‚   â””â”€â”€ en/                    # è‹±æ–‡æ–‡æ¡£
â”‚
â”œâ”€â”€ scripts/                   # æ„å»ºå’Œå‘å¸ƒè„šæœ¬
â”œâ”€â”€ tests/                     # æµ‹è¯•ä»£ç 
â””â”€â”€ package.json              # é¡¹ç›®é…ç½®
```

### æ ¸å¿ƒæ¨¡å—èŒè´£

**Agents æ¨¡å—**

Agents æ¨¡å—æ˜¯ AI ä»£ç†çš„æ ¸å¿ƒå®ç°ï¼Œè´Ÿè´£ï¼šå¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†å’Œå†å²ç»´æŠ¤ï¼›æ¶ˆæ¯æ„é€ å’Œæç¤ºè¯ä¼˜åŒ–ï¼›å·¥å…·è°ƒç”¨å†³ç­–å’Œæ‰§è¡Œåè°ƒï¼›æ¨¡å‹ API è°ƒç”¨å’Œå“åº”è§£æã€‚ç†è§£ Agents æ¨¡å—æœ‰åŠ©äºå¼€å‘æ›´æ™ºèƒ½çš„ä»£ç†è¡Œä¸ºã€‚

**Channels æ¨¡å—**

Channels æ¨¡å—å®ç°äº†ä¸å„ä¸ªæ¶ˆæ¯å¹³å°çš„è¿æ¥ï¼šåè®®é€‚é…â€”â€”å°†é€šç”¨æ¶ˆæ¯æ ¼å¼è½¬æ¢ä¸ºå„å¹³å°ç‰¹å®šæ ¼å¼ï¼›è¿æ¥ç®¡ç†â€”â€”ç»´æŠ¤ WebSocket è¿æ¥å’Œäº‹ä»¶ç›‘å¬ï¼›æ¶ˆæ¯é˜Ÿåˆ—â€”â€”å¤„ç†æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼›é”™è¯¯æ¢å¤â€”â€”å¤„ç†è¿æ¥æ–­å¼€å’Œé‡è¿ã€‚

**Gateway æ¨¡å—**

Gateway æ¨¡å—æä¾›æ ¸å¿ƒçš„ç½‘å…³æœåŠ¡ï¼šWebSocket æœåŠ¡å™¨å®ç°ï¼›æ¶ˆæ¯è·¯ç”±å’Œåˆ†å‘ï¼›è®¤è¯å’Œæˆæƒï¼›çŠ¶æ€ç®¡ç†å’Œç›‘æ§ã€‚

**Tools æ¨¡å—**

Tools æ¨¡å—å®ç°äº†å·¥å…·è°ƒç”¨ç³»ç»Ÿï¼šå·¥å…·å®šä¹‰å’Œæ³¨å†Œï¼›æ‰§è¡Œç¯å¢ƒéš”ç¦»ï¼›ç»“æœæ”¶é›†å’Œè¿”å›ï¼›é”™è¯¯å¤„ç†å’Œé‡è¯•ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

**å¿…éœ€è½¯ä»¶**ï¼š

| è½¯ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | è¯´æ˜ |
|------|----------|----------|------|
| **Node.js** | 22.0.0 | 22.x LTS | JavaScript è¿è¡Œæ—¶ |
| **pnpm** | 9.0.0 | æœ€æ–°ç‰ˆæœ¬ | åŒ…ç®¡ç†å™¨ |
| **Git** | 2.30.0 | æœ€æ–°ç‰ˆæœ¬ | ç‰ˆæœ¬æ§åˆ¶ |
| **TypeScript** | 5.0.0 | æœ€æ–°ç‰ˆæœ¬ | ç±»å‹æ£€æŸ¥ |

**å¯é€‰è½¯ä»¶**ï¼š

| è½¯ä»¶ | ç”¨é€” |
|------|------|
| **Docker** | å®¹å™¨åŒ–å¼€å‘å’Œæµ‹è¯• |
| **PostgreSQL** | æ•°æ®åº“åŠŸèƒ½æµ‹è¯• |
| **Redis** | ç¼“å­˜åŠŸèƒ½æµ‹è¯• |

### å®‰è£…æ­¥éª¤

**æ­¥éª¤ä¸€ï¼šå…‹éš†ä»“åº“**

```bash
# å…‹éš†ä»£ç ä»“åº“
git clone https://github.com/openclaw/openclaw.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd openclaw

# åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯
git checkout develop
```

**æ­¥éª¤äºŒï¼šå®‰è£…ä¾èµ–**

```bash
# ä½¿ç”¨ pnpm å®‰è£…ä¾èµ–
pnpm install

# å®‰è£… UI ç›¸å…³ä¾èµ–
pnpm ui:install

# å®‰è£… git hooks
pnpm prepare
```

**æ­¥éª¤ä¸‰ï¼šé…ç½®å¼€å‘ç¯å¢ƒ**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env

# å…³é”®é…ç½®
ANTHROPIC_API_KEY=your-api-key
OPENAI_API_KEY=your-api-key
DATABASE_URL=postgresql://user:pass@localhost:5432/openclaw
```

**æ­¥éª¤å››ï¼šæ„å»ºé¡¹ç›®**

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æˆ–è€…å¢é‡æ„å»º
pnpm build --filter @openclaw/core

# ç›‘å¬æ¨¡å¼æ„å»ºï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
pnpm build:watch
```

**æ­¥éª¤äº”ï¼šè¿è¡Œå¼€å‘ç‰ˆæœ¬**

```bash
# è¿è¡Œ Gatewayï¼ˆè‡ªåŠ¨é‡æ–°åŠ è½½ï¼‰
pnpm gateway:watch

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ CLI
pnpm openclaw --help
```

### å¼€å‘å·¥å…·é…ç½®

**VS Code è®¾ç½®**ï¼š

```json
// .vscode/settings.json
{
  "typescript.preferences.importModuleSpecifier": "non-relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": "explicit"
  },
  "files.associations": {
    "*.mdx": "markdown"
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/dist": true,
    "**/.turbo": true
  }
}
```

**æ¨èçš„ VS Code æ‰©å±•**ï¼š

- ESLint
- Prettier
- TypeScript Hero
- GitLens
- Error Lens

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

### æ ¸å¿ƒä»£ç ç»“æ„

**Agents æ¨¡å—**ï¼š

```
src/agents/
â”œâ”€â”€ index.ts                     # æ¨¡å—å…¥å£
â”œâ”€â”€ Agent.ts                     # Agent åŸºç±»
â”œâ”€â”€ AgentRuntime.ts             # è¿è¡Œæ—¶ç¯å¢ƒ
â”œâ”€â”€ Context.ts                  # ä¸Šä¸‹æ–‡ç®¡ç†
â”œâ”€â”€ Memory.ts                   # è®°å¿†ç³»ç»Ÿ
â”œâ”€â”€ ToolExecutor.ts             # å·¥å…·æ‰§è¡Œå™¨
â”œâ”€â”€ prompts/                    # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ system.md
â”‚   â””â”€â”€ default.md
â””â”€â”€ types.ts                    # ç±»å‹å®šä¹‰
```

**Channels æ¨¡å—**ï¼š

```
src/channels/
â”œâ”€â”€ index.ts                     # æ¨¡å—å…¥å£
â”œâ”€â”€ Channel.ts                   # Channel åŸºç±»
â”œâ”€â”€ ChannelManager.ts           # æ¸ é“ç®¡ç†å™¨
â”œâ”€â”€ router.ts                   # æ¶ˆæ¯è·¯ç”±
â”œâ”€â”€ types.ts                    # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ telegram/
â”‚   â”œâ”€â”€ index.ts               # Telegram é€‚é…å™¨
â”‚   â”œâ”€â”€ TelegramChannel.ts     # Telegram å®ç°
â”‚   â”œâ”€â”€ handlers/              # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â””â”€â”€ types.ts               # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ whatsapp/
â”‚   â””â”€â”€ ...
â””â”€â”€ slack/
    â””â”€â”€ ...
```

**Gateway æ¨¡å—**ï¼š

```
src/gateway/
â”œâ”€â”€ index.ts                     # æ¨¡å—å…¥å£
â”œâ”€â”€ Gateway.ts                   # Gateway ä¸»ç±»
â”œâ”€â”€ WebSocketServer.ts           # WebSocket æœåŠ¡å™¨
â”œâ”€â”€ Router.ts                   # HTTP è·¯ç”±
â”œâ”€â”€ Auth.ts                     # è®¤è¯æˆæƒ
â”œâ”€â”€ Middleware.ts               # ä¸­é—´ä»¶
â””â”€â”€ types.ts                    # ç±»å‹å®šä¹‰
```

### æ’ä»¶å¼€å‘ç»“æ„

```
extensions/
â””â”€â”€ my-extension/
    â”œâ”€â”€ openclaw.plugin.json    # æ’ä»¶å…ƒæ•°æ®
    â”œâ”€â”€ package.json            # åŒ…é…ç½®
    â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
    â”‚
    â”œâ”€â”€ src/
    â”‚   â””â”€â”€ index.ts           # æ’ä»¶å…¥å£
    â”‚
    â”œâ”€â”€ channels/              # è‡ªå®šä¹‰æ¸ é“
    â”‚   â””â”€â”€ mychannel/
    â”‚       â”œâ”€â”€ index.ts
    â”‚       â”œâ”€â”€ MyChannel.ts
    â”‚       â””â”€â”€ types.ts
    â”‚
    â”œâ”€â”€ tools/                 # è‡ªå®šä¹‰å·¥å…·
    â”‚   â””â”€â”€ mytool/
    â”‚       â”œâ”€â”€ index.ts
    â”‚       â”œâ”€â”€ MyTool.ts
    â”‚       â””â”€â”€ schema.ts
    â”‚
    â””â”€â”€ hooks/                 # è‡ªå®šä¹‰é’©å­
        â””â”€â”€ myhook/
            â”œâ”€â”€ index.ts
            â””â”€â”€ MyHook.ts
```

---

## ğŸ”§ å¼€å‘æµç¨‹

### ä»£ç å¼€å‘æµç¨‹

**æ­¥éª¤ä¸€ï¼šåˆ›å»ºåŠŸèƒ½åˆ†æ”¯**

```bash
# ç¡®ä¿ä»æœ€æ–° develop åˆ†æ”¯åˆ›å»º
git checkout develop
git pull origin develop

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/my-new-feature

# æˆ–åˆ›å»º bugfix åˆ†æ”¯
git checkout -b fix/issue-description
```

**æ­¥éª¤äºŒï¼šå¼€å‘åŠŸèƒ½**

```bash
# è¿è¡Œå¼€å‘æœåŠ¡å™¨
pnpm gateway:watch

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•
pnpm openclaw message send --to "test" --message "test"
```

**æ­¥éª¤ä¸‰ï¼šç¼–å†™æµ‹è¯•**

```bash
# è¿è¡Œæµ‹è¯•
pnpm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pnpm test src/agents/Agent.test.ts

# è¿è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹è¦†ç›–ç‡
pnpm test:coverage
```

**æ­¥éª¤å››ï¼šæäº¤ä»£ç **

```bash
# æŸ¥çœ‹ä¿®æ”¹
git status

# æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶
git add src/agents/Agent.ts

# æäº¤ï¼ˆä½¿ç”¨æ ‡å‡†åŒ–çš„æäº¤ä¿¡æ¯ï¼‰
pnpm commit "feat(agents): add new memory management feature"
```

### æäº¤è§„èŒƒ

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

| ç±»å‹ | æè¿° |
|------|------|
| `feat` | æ–°åŠŸèƒ½ |
| `fix` | Bug ä¿®å¤ |
| `docs` | æ–‡æ¡£æ›´æ–° |
| `style` | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ |
| `refactor` | é‡æ„ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ |
| `perf` | æ€§èƒ½ä¼˜åŒ– |
| `test` | æµ‹è¯•ç›¸å…³ |
| `chore` | æ„å»ºæˆ–è¾…åŠ©å·¥å…·å˜æ›´ |

**æäº¤ä¿¡æ¯æ ¼å¼**ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**ç¤ºä¾‹**ï¼š

```
feat(channels): add support for voice messages

- Implement voice message recording
- Add audio codec conversion
- Integrate with speech-to-text API

Closes #123
```

---

## ğŸ“š å¼€å‘æ–‡æ¡£

### æ’ä»¶å¼€å‘

**åˆ›å»ºæ–°æ’ä»¶**ï¼š

```bash
# ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæ’ä»¶
pnpm create extension my-extension
```

**æ’ä»¶å…ƒæ•°æ®**ï¼š

```json
// openclaw.plugin.json
{
  "id": "my-extension",
  "name": "æˆ‘çš„æ‰©å±•",
  "version": "1.0.0",
  "description": "æˆ‘çš„è‡ªå®šä¹‰æ‰©å±•åŠŸèƒ½",
  "author": {
    "name": "å¼€å‘è€…åç§°",
    "email": "dev@example.com"
  },
  "engine": {
    "openclaw": ">=1.0.0"
  },
  "permissions": [
    "channels",
    "tools"
  ]
}
```

**å®ç°æ’ä»¶**ï¼š

```typescript
// src/index.ts
import type { Plugin, PluginAPI } from "openclaw/plugin-sdk";

export default function MyPlugin(api: PluginAPI): Plugin {
  return {
    // æ’ä»¶å…ƒæ•°æ®
    meta: {
      id: "my-extension",
      version: "1.0.0"
    },
    
    // åˆå§‹åŒ–
    async init() {
      // æ³¨å†Œæ¸ é“
      api.registerChannel(MyChannel);
      
      // æ³¨å†Œå·¥å…·
      api.registerTool(MyTool);
      
      // æ³¨å†Œé’©å­
      api.registerHook(MyHook);
    },
    
    // é”€æ¯
    async destroy() {
      // æ¸…ç†èµ„æº
    }
  };
}
```

### æ¸ é“å¼€å‘

**å®ç°è‡ªå®šä¹‰æ¸ é“**ï¼š

```typescript
// channels/mychannel/index.ts
import type { Channel, ChannelConfig, ChannelMessage } from "openclaw/channel-sdk";

export class MyChannel implements Channel {
  readonly id = "mychannel";
  readonly name = "My Channel";
  
  constructor(private config: ChannelConfig) {}
  
  async connect(): Promise<void> {
    // å»ºç«‹è¿æ¥
  }
  
  async disconnect(): Promise<void> {
    // æ–­å¼€è¿æ¥
  }
  
  async send(message: ChannelMessage): Promise<void> {
    // å‘é€æ¶ˆæ¯
  }
  
  onMessage(callback: (message: ChannelMessage) => void): void {
    // æ¶ˆæ¯ç›‘å¬
  }
  
  async healthCheck(): Promise<boolean> {
    // å¥åº·æ£€æŸ¥
    return true;
  }
}
```

### å·¥å…·å¼€å‘

**å®ç°è‡ªå®šä¹‰å·¥å…·**ï¼š

```typescript
// tools/mytool/index.ts
import type { Tool, ToolResult, ToolContext } from "openclaw/tool-sdk";

export interface MyToolParams {
  input: string;
  option?: boolean;
}

export class MyTool implements Tool {
  readonly name = "myTool";
  readonly description = "æˆ‘çš„è‡ªå®šä¹‰å·¥å…·";
  
  readonly parameters = {
    type: "object",
    properties: {
      input: {
        type: "string",
        description: "è¾“å…¥å‚æ•°"
      },
      option: {
        type: "boolean",
        description: "å¯é€‰å‚æ•°",
        default: false
      }
    },
    required: ["input"]
  };
  
  async execute(
    params: MyToolParams,
    context: ToolContext
  ): Promise<ToolResult> {
    try {
      // æ‰§è¡Œå·¥å…·é€»è¾‘
      const result = await doSomething(params.input);
      
      return {
        success: true,
        data: result
      };
    } catch (error) {
      return {
        success: false,
        error: {
          message: error.message,
          code: "EXECUTION_ERROR"
        }
      };
    }
  }
}
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### æµ‹è¯•æ¡†æ¶

OpenClaw ä½¿ç”¨ **Vitest** ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶
pnpm test src/agents/Agent.test.ts

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:watch

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ unit/                        # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ Agent.test.ts
â”‚   â”œâ”€â”€ channels/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ integration/                 # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ channels/
â”‚   â”‚   â””â”€â”€ telegram.test.ts
â”‚   â””â”€â”€ gateway/
â”‚       â””â”€â”€ routing.test.ts
â”‚
â”œâ”€â”€ e2e/                         # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ fixtures/                    # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ utils/                       # æµ‹è¯•å·¥å…·
    â””â”€â”€ setup.ts
```

### ç¼–å†™æµ‹è¯•

**å•å…ƒæµ‹è¯•ç¤ºä¾‹**ï¼š

```typescript
// tests/unit/agents/Agent.test.ts
import { describe, it, expect, vi, beforeEach } from "vitest";
import { Agent } from "../../src/agents/Agent";

describe("Agent", () => {
  let agent: Agent;
  
  beforeEach(() => {
    agent = new Agent({
      model: "anthropic/claude-sonnet-4",
      systemPrompt: "You are a helpful assistant."
    });
  });
  
  it("should create agent with correct configuration", () => {
    expect(agent.model).toBe("anthropic/claude-sonnet-4");
    expect(agent.systemPrompt).toBe("You are a helpful assistant.");
  });
  
  it("should process message and return response", async () => {
    const response = await agent.process("Hello!");
    
    expect(response).toBeDefined();
    expect(response.content).toBeDefined();
    expect(typeof response.content).toBe("string");
  });
});
```

---

## ğŸ“¦ æ„å»ºå’Œå‘å¸ƒ

### æ„å»ºå‘½ä»¤

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æ„å»ºç‰¹å®šåŒ…
pnpm build --filter @openclaw/core

# æ¸…ç†æ„å»ºäº§ç‰©
pnpm clean

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

### å‘å¸ƒåŒ…

```bash
# ç™»å½• npm
npm login

# å‘å¸ƒåˆ° npm
pnpm publish --access public

# å‘å¸ƒåˆ°ç‰¹å®šæ ‡ç­¾
pnpm publish --tag beta
```

---

## ğŸ› ï¸ å¼€å‘æ”¯æŒ

### å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | ç”¨é€” |
|------|------|
| `pnpm install` | å®‰è£…ä¾èµ– |
| `pnpm build` | æ„å»ºé¡¹ç›® |
| `pnpm gateway:watch` | å¼€å‘æ¨¡å¼è¿è¡Œ |
| `pnpm test` | è¿è¡Œæµ‹è¯• |
| `pnpm lint` | ä»£ç æ£€æŸ¥ |
| `pnpm format` | ä»£ç æ ¼å¼åŒ– |
| `pnpm commit` | æäº¤ä»£ç  |

### è·å–å¸®åŠ©

- **GitHub Issues**ï¼šæŠ¥å‘Š bug å’Œæå‡ºåŠŸèƒ½å»ºè®®
- **Discord ç¤¾åŒº**ï¼šå®æ—¶äº¤æµå’Œå¸®åŠ©
- **è®¨è®ºåŒº**ï¼šæå‡ºé—®é¢˜å’Œåˆ†äº«æƒ³æ³•

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®ç»“æ„](/zh-CN/developer/project-structure)â€”â€”ä»£ç ç»“æ„è¯¦è§£
- [æ’ä»¶å¼€å‘](/zh-CN/developer/plugin-development)â€”â€”å¼€å‘æ‰©å±•æ’ä»¶
- [æµ‹è¯•æŒ‡å—](/zh-CN/developer/testing)â€”â€”æµ‹è¯•æœ€ä½³å®è·µ
- [è´¡çŒ®æŒ‡å—](/zh-CN/developer/contributing)â€”â€”ä»£ç è´¡çŒ®è§„èŒƒ
- [API æ–‡æ¡£](/zh-CN/reference)â€”â€”API å‚è€ƒ
