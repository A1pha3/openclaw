---
summary: "OpenClaw TUI 完全指南：终端用户界面的功能详解、快捷键参考与高级用法"
read_when:
  - 需要使用 TUI 与 OpenClaw 交互时
  - 想了解 TUI 的完整功能列表时
  - 需要 TUI 快捷键和命令参考时
  - 排查 TUI 相关问题时
title: "终端用户界面（TUI）"
---

# OpenClaw TUI 完全指南

## 学习目标

完成本章节学习后，你将能够：

### 基础目标（必掌握）

- [ ] 理解 **TUI（终端用户界面）** 的核心定位和使用场景
- [ ] 掌握 TUI 的基本操作流程
- [ ] 能够发送消息并配置传递选项
- [ ] 熟练使用常用快捷键和斜杠命令

### 进阶目标（建议掌握）

- [ ] 理解代理（Agent）与会话（Session）的概念和关系
- [ ] 掌握选择器和叠加层的使用方法
- [ ] 理解本地 shell 命令的执行机制
- [ ] 能够进行远程网关连接

### 专家目标（挑战）

- [ ] 能够排查复杂的 TUI 连接和通信问题
- [ ] 理解 TUI 的技术架构和限制
- [ ] 能够配置高级选项和自定义行为

---

## 第一部分：TUI 概述

### 1.1 什么是 TUI？

**核心定义**：TUI（Terminal User Interface，终端用户界面）是 OpenClaw 的**终端交互界面**，允许用户通过命令行终端与 OpenClaw Gateway 进行实时交互。

**设计哲学**：TUI 旨在提供一个**轻量级、响应快速、功能完整**的终端界面，适合开发者和技术用户使用。

```
TUI 定位图：

┌─────────────────────────────────────────────────────────┐
│                   OpenClaw 交互界面                      │
│  ┌─────────────────┐  ┌─────────────────┐             │
│  │   Web UI        │  │   TUI           │             │
│  │  图形界面        │  │  终端界面        │             │
│  │  - 浏览器访问    │  │  - 命令行交互    │             │
│  │  - 丰富可视化    │  │  - 键盘优先      │             │
│  │  - 鼠标操作      │  │  - 快速响应      │             │
│  └─────────────────┘  └─────────────────┘             │
│  ┌─────────────────┐  ┌─────────────────┐             │
│  │   CLI           │  │   API           │             │
│  │  命令行工具      │  │  程序接口        │             │
│  └─────────────────┘  └─────────────────┘             │
└─────────────────────────────────────────────────────────┘
```

### 1.2 TUI vs 其他界面

| 特性 | TUI | Web UI | CLI |
|------|-----|--------|-----|
| 交互方式 | 键盘 + 终端 | 鼠标 + 浏览器 | 命令行 |
| 实时性 | 即时响应 | WebSocket 延迟 | 命令延迟 |
| 视觉效果 | 终端样式 | 丰富组件 | 纯文本 |
| 学习曲线 | 中等 | 低 | 高 |
| 适用场景 | 开发者日常 | 新用户入门 | 脚本集成 |
| 消息历史 | 内置 | 内置 | 无 |

### 1.3 使用场景

| 场景 | 推荐界面 | 原因 |
|------|----------|------|
| 快速提问 | TUI | 即时响应 |
| 查看历史 | Web UI | 更好的可视化 |
| 脚本集成 | CLI | 可编程 |
| 初次体验 | Web UI | 更友好 |
| 移动端 | Web UI | 响应式设计 |
| 多任务 | TUI | 多终端并行 |

---

## 第二部分：快速入门

### 2.1 启动 TUI

**步骤一：确保 Gateway 运行**

```bash
# 启动 Gateway
openclaw gateway

# 或在后台运行
openclaw gateway --port 18789
```

**步骤二：打开 TUI**

```bash
# 基本启动（连接到本地 Gateway）
openclaw tui

# 指定会话
openclaw tui --session main
```

**步骤三：发送消息**

1. 在输入框中输入消息
2. 按 `Enter` 发送
3. 等待 AI 回复

### 2.2 远程网关连接

当 Gateway 运行在远程服务器时：

```bash
# 通过 WebSocket URL 连接
openclaw tui --url ws://<host>:<port>

# 带认证令牌
openclaw tui --url ws://<host>:<port> --token <gateway-token>

# 使用密码认证
openclaw tui --url ws://<host>:<port> --password <gateway-password>
```

**连接示例**：

```bash
# 连接到远程服务器
openclaw tui --url ws://192.168.1.100:18789 --token abc123

# 使用密码（如果 Gateway 配置了密码认证）
openclaw tui --url ws://192.168.1.100:18789 --password mypassword

# 组合使用
openclaw tui --url ws://192.168.1.100:18789 --token abc123 --session research
```

---

## 第三部分：界面详解

### 3.1 界面布局

```
TUI 界面布局图：

┌─────────────────────────────────────────────────────────────────────────┐
│  标题栏                                                                    │
│  [ws://127.0.0.1:18789]  main  ×  global  │  OpenClaw v2.0           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  聊天日志区域                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐│
│  │  [用户] 你好                                                          ││
│  │  ────────────────────────────────────────                            ││
│  │  [助手] 你好！我是 OpenClaw。有什么可以帮你的？                        ││
│  │  ┌───────────────────────────────────────────────────────────────┐   ││
│  │  │  思考过程：                                                    │   ││
│  │  │  - 用户在打招呼                                                │   ││
│  │  │  - 应该友好回应                                                │   ││
│  │  └───────────────────────────────────────────────────────────────┘   ││
│  │  好的，很高兴见到你！                                               ││
│  └─────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├─────────────────────────────────────────────────────────────────────────┤
│  状态行                                                                 │
│  ● 连接中  main  session:main  Claude-4  🧠低  📝关  💰关  1.2K tokens │
├─────────────────────────────────────────────────────────────────────────┤
│  输入框                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐│
│  │  > _                                                                ││
│  └─────────────────────────────────────────────────────────────────────┘│
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.2 各区域说明

| 区域 | 内容 | 说明 |
|------|------|------|
| **标题栏** | 连接 URL、当前代理、会话范围 | 显示当前连接状态 |
| **聊天日志** | 用户消息、助手回复、系统通知、工具卡片 | 主交互区域 |
| **状态行** | 连接状态、代理、会话、模型、思考级别、详细级别、令牌计数 | 快速状态概览 |
| **输入框** | 带自动完成的文本编辑器 | 消息输入 |

### 3.3 状态指示符

| 指示符 | 含义 | 颜色 |
|--------|------|------|
| ● | 连接中 | 黄色 |
| ✓ | 已连接/空闲 | 绿色 |
| ⚡ | 处理中/忙碌 | 蓝色 |
| ✗ | 错误 | 红色 |
| ○ | 断开 | 灰色 |

---

## 第四部分：核心概念

### 4.1 心理模型：代理与会话

理解 TUI 需要掌握两个核心概念：**代理（Agent）** 和 **会话（Session）**。

```
代理与会话关系图：

┌─────────────────────────────────────────────────────────┐
│                    代理（Agent）                          │
│  ├─ 代理是唯一的标识符（如 main、research）              │
│  ├─ Gateway 暴露可用的代理列表                          │
│  ├─ 每个代理可以有多个会话                               │
│  └─ TUI 当前连接到一个代理                              │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│                    会话（Session）                       │
│  ├─ 会话属于当前代理                                    │
│  ├─ 会话密钥格式：agent:<agentId>:<sessionKey>         │
│  ├─ 会话范围：                                          │
│  │   ├─ per-sender（默认）：每个代理有多个会话          │
│  │   └─ global：TUI 使用全局会话                        │
│  └─ 当前代理 + 会话始终显示在页脚                       │
└─────────────────────────────────────────────────────────┘

示例：
- 输入 /session main → agent:main:main
- 输入 /session agent:other:main → agent:other:main
- 输入 /session global → agent:main:global（如果范围为 global）
```

### 4.2 会话范围详解

**per-sender（默认）**：

```
per-sender 模式：

Agent: main
│
├── Session: main（默认）
│   ├─ 用户A的会话
│   ├─ 用户B的会话
│   └─ 用户C的会话
│
└── Session: research
    ├─ 用户A的研究会话
    └─ 用户B的研究会话
```

**global**：

```
global 模式：

Agent: main
│
└── Session: global（唯一）
    └─ 所有消息都在这个会话中
```

### 4.3 传递机制

**默认行为**：消息发送到 Gateway，助手回复**不**自动传递到消息渠道。

**开启传递**：

| 方法 | 命令 | 说明 |
|------|------|------|
| 斜杠命令 | `/deliver on` | 开启传递 |
| 面板设置 | 使用设置面板开启 | GUI 方式 |
| 启动参数 | `openclaw tui --deliver` | 启动时开启 |

```
传递流程图：

    ┌─────────────────────────────────────────┐
    │  用户在 TUI 中发送消息                    │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  Gateway 接收并处理消息                  │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  AI 助手生成回复                        │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  传递选项检查                            │
    │  ├─ 关闭（默认）：仅显示在 TUI           │
    │  └─ 开启：同时发送到配置的渠道           │
    └─────────────────────────────────────────┘
```

---

## 第五部分：选择器与叠加层

### 5.1 模型选择器

**功能**：列出可用模型并设置会话覆盖。

**快捷键**：`Ctrl+L`

**使用方式**：

1. 按 `Ctrl+L` 打开选择器
2. 使用方向键选择模型
3. 按 `Enter` 确认
4. 按 `Esc` 取消

**显示内容**：

```
模型选择器：

┌─────────────────────────────────────────┐
│  选择模型                               │
├─────────────────────────────────────────┤
│  > anthropic/claude-opus-4-5 ← 当前     │
│    anthropic/claude-sonnet-4          │
│    openai/gpt-4o                       │
│    openai/gpt-4o-mini                  │
│    ...                                 │
├─────────────────────────────────────────┤
│  [Enter] 确认  [Esc] 取消               │
└─────────────────────────────────────────┘
```

### 5.2 代理选择器

**功能**：选择不同的代理。

**快捷键**：`Ctrl+G`

**使用方式**：

1. 按 `Ctrl+G` 打开选择器
2. 选择目标代理
3. 确认切换

**显示内容**：

```
代理选择器：

┌─────────────────────────────────────────┐
│  选择代理                               │
├─────────────────────────────────────────┤
│  > main ← 当前                          │
│    research                             │
│    development                          │
│    testing                              │
├─────────────────────────────────────────┤
│  [Enter] 确认  [Esc] 取消               │
└─────────────────────────────────────────┘
```

### 5.3 会话选择器

**功能**：显示当前代理的会话列表。

**快捷键**：`Ctrl+P`

**使用方式**：

1. 按 `Ctrl+P` 打开选择器
2. 选择目标会话
3. 确认切换

**显示内容**：

```
会话选择器：

┌─────────────────────────────────────────┐
│  选择会话 (main)                        │
├─────────────────────────────────────────┤
│  > main ← 当前会话                      │
│    research                             │
│    2024-01-15-discussion              │
│    project-planning                     │
├─────────────────────────────────────────┤
│  [Enter] 确认  [Esc] 取消               │
└─────────────────────────────────────────┘
```

### 5.4 设置叠加层

**功能**：切换各种显示和功能选项。

**快捷键**：无默认绑定，使用斜杠命令 `/settings`

**可设置项**：

| 选项 | 说明 | 默认值 |
|------|------|--------|
| 传递 | 将回复发送到渠道 | 关闭 |
| 工具输出扩展 | 显示详细工具输出 | 开启 |
| 推理可见性 | 显示思考过程 | 开启 |

---

## 第六部分：快捷键参考

### 6.1 基本操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Enter` | 发送消息 | 发送输入框中的内容 |
| `Esc` | 中止运行 | 中断当前正在进行的处理 |
| `Ctrl+C` | 清除输入 | 第一次：清除输入；第二次：退出 |
| `Ctrl+D` | 退出 TUI | 关闭 TUI 窗口 |
| `Ctrl+L` | 模型选择器 | 打开模型选择 |
| `Ctrl+G` | 代理选择器 | 打开代理选择 |
| `Ctrl+P` | 会话选择器 | 打开会话选择 |
| `Ctrl+O` | 工具输出切换 | 折叠/展开工具输出 |
| `Ctrl+T` | 推理切换 | 切换推理可见性 |

### 6.2 快捷键冲突解决

当快捷键与系统或其他应用冲突时：

```bash
# 方案一：使用斜杠命令替代
/model gpt-4o      # 替代 Ctrl+L
/agent research    # 替代 Ctrl+G
/session main      # 替代 Ctrl+P

# 方案二：修改终端快捷键设置
# 在终端偏好设置中重新绑定
```

---

## 第七部分：斜杠命令

### 7.1 核心命令

| 命令 | 功能 | 示例 |
|------|------|------|
| `/help` | 显示帮助信息 | `/help` |
| `/status` | 显示当前状态 | `/status` |
| `/agent <id>` | 切换代理 | `/agent research` |
| `/agents` | 列出可用代理 | `/agents` |
| `/session <key>` | 切换会话 | `/session research` |
| `/sessions` | 列出可用会话 | `/sessions` |
| `/model <provider/model>` | 切换模型 | `/model anthropic/claude-opus-4` |
| `/models` | 列出可用模型 | `/models` |

### 7.2 会话控制命令

| 命令 | 功能 | 参数 |
|------|------|------|
| `/think <level>` | 设置思考级别 | `off`, `minimal`, `low`, `medium`, `high` |
| `/verbose <mode>` | 设置详细级别 | `on`, `full`, `off` |
| `/reasoning <mode>` | 推理显示 | `on`, `off`, `stream` |
| `/usage <mode>` | 用量显示 | `off`, `tokens`, `full` |
| `/elevated <mode>` | 提升权限 | `on`, `off`, `ask`, `full` |
| `/activation <mode>` | 激活模式 | `mention`, `always`（群聊） |
| `/deliver <mode>` | 传递设置 | `on`, `off` |

### 7.3 会话生命周期命令

| 命令 | 功能 | 说明 |
|------|------|------|
| `/new` | 新建会话 | 创建新的会话上下文 |
| `/reset` | 重置会话 | 清空当前会话历史 |
| `/abort` | 中止运行 | 停止当前处理 |
| `/settings` | 打开设置 | 打开设置叠加层 |
| `/exit` | 退出 TUI | 关闭 TUI |

### 7.4 命令参数说明

**思考级别参数**：

| 级别 | 说明 | 令牌消耗 |
|------|------|----------|
| `off` | 不显示思考 | 低 |
| `minimal` | 最小思考 | 低 |
| `low` | 低思考 | 中 |
| `medium` | 中等思考 | 中高 |
| `high` | 高思考 | 高 |

**详细级别参数**：

| 级别 | 说明 |
|------|------|
| `off` | 只显示最终回复 |
| `on` | 显示简要工具调用 |
| `full` | 显示完整工具调用详情 |

**提升权限级别**：

| 级别 | 说明 |
|------|------|
| `off` | 无提升权限 |
| `on` | 临时提升权限 |
| `ask` | 每次询问 |
| `full` | 完全信任（谨慎使用） |

---

## 第八部分：高级功能

### 8.1 本地 Shell 命令

**功能**：在 TUI 主机上运行本地 Shell 命令。

**触发方式**：以 `!` 开头的行

```
示例：

> !ls -la                    # 列出文件
> !pwd                       # 显示当前目录
> !git status               # 检查 Git 状态
> !node -v                  # 查看 Node 版本
```

**执行机制**：

```
Shell 命令执行流程：

    ┌─────────────────────────────────────────┐
    │  检测到以 ! 开头的输入                   │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  首次执行时提示授权                      │
    │  "允许本地 shell 执行？(y/n)"            │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  执行命令                                │
    │  在新非交互 shell 中执行                  │
    │  无持久 cd/环境                          │
    └─────────────────┬───────────────────────┘
                      ▼
    ┌─────────────────────────────────────────┐
    │  返回结果                                │
    │  stdout/stderr/exit code                 │
    └─────────────────────────────────────────┘
```

**注意事项**：

1. **单次授权**：首次执行时需要授权，后续同会话无需重复
2. **拒绝后禁用**：选择拒绝后，该会话的 `!` 命令保持禁用
3. **新会话重新授权**：每个新会话需要重新授权
4. **无持久环境**：每次执行都在全新 shell 中，无持久 `cd` 或环境变量

### 8.2 工具输出显示

**工具调用卡片**：

```
工具调用示例：

┌─────────────────────────────────────────────────────────┐
│  🔧 read({filePath: "/path/to/file.txt"})              │
├─────────────────────────────────────────────────────────┤
│  输出：                                                 │
│  {                                                     │
│    "content": "文件内容...",                           │
│    "lines": 42                                         │
│  }                                                     │
├─────────────────────────────────────────────────────────┤
│  ⏱ 耗时： 123ms  [折叠] [展开]                        │
└─────────────────────────────────────────────────────────┘
```

**折叠/展开切换**：`Ctrl+O`

### 8.3 历史与流式传输

**历史加载**：

- 连接时自动加载最近历史（默认 200 条消息）
- 可通过 `--history-limit <n>` 自定义

**流式响应**：

- 回复在输入位置实时流式更新
- 完成后固定为最终内容

### 8.4 事件监听

TUI 还监听代理工具事件，提供更丰富的工具卡片。

---

## 第九部分：连接选项

### 9.1 命令行参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `--url <url>` | Gateway WebSocket URL | `ws://127.0.0.1:<port>` |
| `--token <token>` | Gateway 认证令牌 | 无 |
| `--password <password>` | Gateway 密码 | 无 |
| `--session <key>` | 会话密钥 | `main`（或 `global`） |
| `--deliver` | 开启消息传递 | 关闭 |
| `--thinking <level>` | 思考级别覆盖 | 使用配置 |
| `--timeout-ms <ms>` | 代理超时（毫秒） | `agents.defaults.timeoutSeconds` |
| `--history-limit <n>` | 历史消息数量 | 200 |

### 9.2 连接状态

| 状态 | 说明 | 操作建议 |
|------|------|----------|
| `disconnected` | 未连接 | 检查 Gateway 是否运行，检查 URL/令牌 |
| `connecting` | 正在连接 | 等待或检查网络 |
| `connected` | 已连接 | 正常使用 |
| `error` | 连接错误 | 检查日志，排查问题 |

---

## 第十部分：故障排查

### 10.1 常见问题与解决方案

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| 发送消息后无输出 | Gateway 未连接 | 运行 `/status` 确认状态 |
| 无法连接 Gateway | Gateway 未运行 | 启动 `openclaw gateway` |
| 令牌认证失败 | 令牌错误或过期 | 检查 `--token` 参数 |
| 消息未发送到渠道 | 传递未开启 | 运行 `/deliver on` |
| 历史不显示 | 历史限制太小 | 使用 `--history-limit 500` |
| 快捷键不响应 | 终端兼容问题 | 使用斜杠命令替代 |
| Shell 命令不执行 | 未授权 | 首次输入 `!` 时授权 |

### 10.2 诊断命令

```bash
# 检查 Gateway 状态
openclaw status

# 检查模型配置
openclaw models status

# 查看 Gateway 日志
openclaw logs --follow

# 测试连接
curl ws://127.0.0.1:18789
```

### 10.3 高级故障排查

**问题：TUI 频繁断开连接**

```bash
# 检查网络稳定性
ping <gateway-host>

# 增加心跳间隔（Gateway 配置）
# gateway.heartbeat.interval

# 检查资源使用
top -pid $(pgrep -f "openclaw gateway")
```

**问题：消息延迟高**

```bash
# 本地运行 Gateway
openclaw gateway --port 18789

# 使用轻量级模型
/model anthropic/claude-haiku

# 减少历史消息数量
openclaw tui --history-limit 50
```

---

## 总结与进阶

### 知识点回顾

本章节的核心知识点包括：

1. **TUI 定位**：理解 TUI 在 OpenClaw 交互体系中的位置
2. **界面布局**：掌握 TUI 各区域的含义和用途
3. **代理与会话**：理解核心概念及其关系
4. **快捷键**：熟练使用常用快捷键
5. **斜杠命令**：掌握核心命令和会话控制
6. **高级功能**：理解本地 shell 命令和工具输出

### 学习成果检验

完成本章节学习后，你应该能够：

- [ ] 独立启动和配置 TUI 连接
- [ ] 使用快捷键和命令高效操作 TUI
- [ ] 配置代理、会话和模型切换
- [ ] 排查常见的连接和通信问题
- [ ] 使用高级功能如本地 shell 命令

### 下一步学习

- **进阶用法**：[CLI 命令参考](/cli/) — 了解更多命令
- **Gateway 配置**：[Gateway 配置](/gateway/configuration) — 了解高级配置
- **故障排查**：[故障排查指南](/help/troubleshooting) — 详细问题解决方案

---

## 附录

### 斜杠命令速查表

| 分类 | 命令 | 功能 |
|------|------|------|
| **基本信息** | `/help` | 显示帮助 |
| | `/status` | 显示状态 |
| **代理管理** | `/agent <id>` | 切换代理 |
| | `/agents` | 列出代理 |
| **会话管理** | `/session <key>` | 切换会话 |
| | `/sessions` | 列出会话 |
| | `/new` | 新建会话 |
| | `/reset` | 重置会话 |
| **模型管理** | `/model <model>` | 切换模型 |
| | `/models` | 列出模型 |
| **控制参数** | `/think <level>` | 思考级别 |
| | `/verbose <mode>` | 详细级别 |
| | `/deliver <mode>` | 传递设置 |
| | `/elevated <mode>` | 提升权限 |
| **其他** | `/abort` | 中止运行 |
| | `/exit` | 退出 TUI |

### 快捷键速查表

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Esc` | 中止运行 |
| `Ctrl+C` | 清除/退出 |
| `Ctrl+L` | 模型选择器 |
| `Ctrl+G` | 代理选择器 |
| `Ctrl+P` | 会话选择器 |
| `Ctrl+O` | 工具输出切换 |
| `Ctrl+T` | 推理切换 |

---

_文档版本：v2.0_
_最后更新：2026-02-05_
