---
summary: "ä¼šè¯ç³»ç»Ÿè¯¦è§£ - ä¼šè¯ç±»å‹ã€ç®¡ç†å’Œé…ç½®"
read_when:
  - äº†è§£ä¼šè¯å¦‚ä½•å·¥ä½œ
  - ç®¡ç†ä¼šè¯å†å²
  - é…ç½®ä¼šè¯è¡Œä¸º
title: "ä¼šè¯ç³»ç»Ÿ"
---

# ğŸ’¬ ä¼šè¯ç³»ç»Ÿ

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» OpenClaw çš„ä¼šè¯ï¼ˆSessionï¼‰ç³»ç»Ÿï¼ŒåŒ…æ‹¬ä¼šè¯ç±»å‹ã€ç®¡ç†å’Œé…ç½®ã€‚

## ğŸ¯ ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Ÿ

**ä¼šè¯ï¼ˆSessionï¼‰** æ˜¯ OpenClaw ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡çš„åŸºæœ¬å•å…ƒï¼š

```
ç”¨æˆ· â”€â”€â”€ æ¶ˆæ¯ â”€â”€â”€â†’ OpenClaw â”€â”€â”€â†’ AI å¤„ç† â”€â”€â”€â†’ å“åº”
                   â”‚
                   â””â”€â”€ ä¼šè¯ï¼ˆè®°å½•å¯¹è¯å†å²ï¼‰
```

### ä¼šè¯çš„ä½œç”¨

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **ä¸Šä¸‹æ–‡ä¿æŒ** | è®°ä½å¯¹è¯å†å² |
| **çŠ¶æ€ç®¡ç†** | ä¿å­˜å¯¹è¯çŠ¶æ€ |
| **éš”ç¦»** | ä¸åŒå¯¹è¯ç‹¬ç«‹å¤„ç† |
| **æ¢å¤** | å¯å›æº¯å†å²çŠ¶æ€ |

---

## ğŸ“Š ä¼šè¯ç±»å‹

### ç§èŠï¼ˆDMï¼‰ä¼šè¯

```
ä¼šè¯é”®ï¼šagent:main:whatsapp:dm:+15551234567
      â””â”€â”€â”€â”˜ â””â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â” â””â”€â”€â” â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚    â”‚       â”‚       â”‚    â”‚       â”‚
        â”‚    â”‚       â”‚       â”‚    â”‚       â””â”€â”€ å‘é€è€… ID
        â”‚    â”‚       â”‚       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç±»å‹ï¼ˆdmï¼‰
        â”‚    â”‚       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ¸ é“
        â”‚    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä»£ç† ID
        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ¶ˆæ¯é€šé“ï¼ˆwhatsappï¼‰
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä»£ç†æ ‡è¯†ï¼ˆagentï¼‰
```

### ç¾¤ç»„ä¼šè¯

```
ä¼šè¯é”®ï¼šagent:main:telegram:group:-1001234567890
                                         â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â””â”€â”€ ç¾¤ç»„ ID
```

### é¢‘é“ä¼šè¯

```
ä¼šè¯é”®ï¼šagent:main:discord:channel:1234567890
                                   â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â””â”€â”€ é¢‘é“ ID
```

---

## ğŸ”‘ ä¼šè¯é”®æ ¼å¼

```
agent:<agentId>:<channel>:<type>:<id>
```

| ç»„ä»¶ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `agent` | å›ºå®šå‰ç¼€ | `agent` |
| `agentId` | ä»£ç† ID | `main`, `work` |
| `channel` | æ¸ é“åç§° | `whatsapp`, `telegram` |
| `type` | ä¼šè¯ç±»å‹ | `dm`, `group`, `channel` |
| `id` | æ ‡è¯†ç¬¦ | ç”µè¯ã€ç¾¤ç»„ ID ç­‰ |

---

## âš™ï¸ ä¼šè¯é…ç½®

### åŸºç¡€é…ç½®

```json5
{
  session: {
    mainKey: "main",           // DM åˆå¹¶é”®
    maxAge: "30d",             // ä¼šè¯æœ€å¤§å­˜æ´»æ—¶é—´
    maxMessages: 1000,         // æœ€å¤§æ¶ˆæ¯æ•°
    autoSave: true             // è‡ªåŠ¨ä¿å­˜
  }
}
```

### ä¼šè¯åˆå¹¶

é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ç”¨æˆ·çš„ DM åˆå¹¶åˆ°ä¸»ä¼šè¯ï¼š

```json5
{
  session: {
    mainKey: "main",  // åˆå¹¶åˆ°ä¸»ä¼šè¯
    
    // ç¦ç”¨åˆå¹¶
    // mainKey: null
  }
}
```

### ç¾¤ç»„éš”ç¦»

```json5
{
  session: {
    groupIsolation: true  // æ¯ä¸ªç¾¤ç»„ç‹¬ç«‹ä¼šè¯
  }
}
```

---

## ğŸ› ï¸ ä¼šè¯ç®¡ç†

### æŸ¥çœ‹ä¼šè¯

```bash
# åˆ—å‡ºæ‰€æœ‰ä¼šè¯
openclaw sessions list

# æŸ¥çœ‹ç‰¹å®šä¼šè¯
openclaw sessions list --channel whatsapp

# æŸ¥çœ‹æ´»åŠ¨ä¼šè¯
openclaw sessions list --active
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
æ´»åŠ¨ä¼šè¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é”®                                          â”‚ æ¶ˆæ¯æ•° â”‚ æ¸ é“     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ agent:main:whatsapp:dm:+15551234567         â”‚ 45     â”‚ whatsapp â”‚
â”‚ agent:main:telegram:group:-1001234567890   â”‚ 23     â”‚ telegram â”‚
â”‚ agent:work:discord:channel:1234567890      â”‚ 12     â”‚ discord  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŸ¥çœ‹ä¼šè¯å†å²

```bash
# æŸ¥çœ‹å†å²
openclaw sessions history agent:main:whatsapp:dm:+15551234567

# æŸ¥çœ‹æœ€è¿‘ N æ¡
openclaw sessions history agent:main:telegram:dm:123456789 --lines 20

# æœç´¢å†å²
openclaw sessions history agent:main:whatsapp:dm:+15551234567 --grep "é”™è¯¯"
```

### æ¸…é™¤ä¼šè¯

```bash
# æ¸…é™¤ç‰¹å®šä¼šè¯
openclaw sessions clear agent:main:whatsapp:dm:+15551234567

# æ¸…é™¤æ‰€æœ‰æ—§ä¼šè¯
openclaw sessions clear --older-than 7d

# æ¸…é™¤æ‰€æœ‰ä¼šè¯
openclaw sessions clear --all
```

### å‹ç¼©ä¼šè¯

```bash
# å‹ç¼©ä¼šè¯ä¸Šä¸‹æ–‡
openclaw sessions compact agent:main:whatsapp:dm:+15551234567

# è‡ªåŠ¨å‹ç¼©è¶…è¿‡é™åˆ¶çš„ä¼šè¯
openclaw sessions compact --auto
```

---

## ğŸ“ˆ ä¼šè¯çŠ¶æ€

### çŠ¶æ€ç±»å‹

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| **active** | æ´»åŠ¨ä¼šè¯ï¼Œæœ‰æ¶ˆæ¯äº¤äº’ |
| **idle** | ç©ºé—²ä¼šè¯ï¼Œè¶…è¿‡æ—¶é—´æ— äº¤äº’ |
| **archived** | å·²å½’æ¡£ä¼šè¯ |
| **expired** | å·²è¿‡æœŸä¼šè¯ |

### è®¾ç½®ç©ºé—²è¶…æ—¶

```json5
{
  session: {
    idleTimeout: "1h",     // 1å°æ—¶åæ ‡è®°ä¸ºç©ºé—²
    archiveAfter: "7d",    // 7å¤©åå½’æ¡£
    expireAfter: "30d"     // 30å¤©åè¿‡æœŸåˆ é™¤
  }
}
```

---

## ğŸ”„ ä¼šè¯ç”Ÿå‘½å‘¨æœŸ

```
åˆ›å»ºä¼šè¯
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ´»åŠ¨çŠ¶æ€    â”‚ â†â”€â”€ æ¶ˆæ¯äº¤äº’
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ï¼ˆç©ºé—²è¶…æ—¶ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç©ºé—²çŠ¶æ€    â”‚ â†â”€â”€ å®šæ—¶æ£€æŸ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ï¼ˆå½’æ¡£æ—¶é—´ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·²å½’æ¡£çŠ¶æ€  â”‚ â†â”€â”€ å¯æ¢å¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ï¼ˆè¿‡æœŸæ—¶é—´ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·²åˆ é™¤      â”‚ â†â”€â”€ æ°¸ä¹…åˆ é™¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ä¼šè¯ç»Ÿè®¡

### æŸ¥çœ‹ç»Ÿè®¡

```bash
# ä¼šè¯ç»Ÿè®¡
openclaw sessions stats

# è¾“å‡ºç¤ºä¾‹ï¼š
# æ€»ä¼šè¯æ•°: 156
# æ´»åŠ¨ä¼šè¯: 23
# ç©ºé—²ä¼šè¯: 45
# å½’æ¡£ä¼šè¯: 88
```

### æ¶ˆæ¯ç»Ÿè®¡

```bash
# æŒ‰æ¸ é“ç»Ÿè®¡
openclaw sessions stats --by-channel

# è¾“å‡ºç¤ºä¾‹ï¼š
# whatsapp: 5,230 æ¡æ¶ˆæ¯
# telegram: 3,456 æ¡æ¶ˆæ¯
# discord:  1,234 æ¡æ¶ˆæ¯
```

---

## ğŸ”’ ä¼šè¯å®‰å…¨

### ä¼šè¯éš”ç¦»

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",  // éä¸»ä¼šè¯ä½¿ç”¨æ²™ç®±
        scope: "session"   // æ¯ä¸ªä¼šè¯ç‹¬ç«‹
      }
    }
  }
}
```

### ä¼šè¯åŠ å¯†

```json5
{
  session: {
    encryption: {
      enabled: true,
      algorithm: "aes-256-gcm"
    }
  }
}
```

---

## ğŸ› æ•…éšœæ’é™¤

### ä¼šè¯æ— æ³•åŠ è½½

```bash
# æ£€æŸ¥ä¼šè¯æ–‡ä»¶
ls ~/.openclaw/sessions/

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
openclaw logs --lines 50 | grep "session"
```

### ä¼šè¯å†²çª

```bash
# å¼ºåˆ¶æ¸…é™¤å†²çªä¼šè¯
openclaw sessions clear <session-key> --force

# æŸ¥çœ‹ä¼šè¯çŠ¶æ€
openclaw sessions status <session-key>
```

---

## ğŸ“ æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–

```json5
{
  session: {
    maxMessages: 500,      // é™åˆ¶æ¶ˆæ¯æ•°
    maxAge: "7d",          // è¾ƒçŸ­ä¿ç•™æœŸ
    autoCompact: true,     // è‡ªåŠ¨å‹ç¼©
    compressInterval: "1h" // æ¯å°æ—¶å‹ç¼©
  }
}
```

### ç”¨æˆ·ä½“éªŒ

```json5
{
  session: {
    mainKey: "main",       // ç»Ÿä¸€ä¸»ä¼šè¯
    preserveContext: true, // ä¿ç•™ä¸Šä¸‹æ–‡
    showHistory: true      // æ˜¾ç¤ºå†å²æ‘˜è¦
  }
}
```

---

## ğŸ”§ ç›¸å…³å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `openclaw sessions list` | åˆ—å‡ºä¼šè¯ |
| `openclaw sessions history` | æŸ¥çœ‹å†å² |
| `openclaw sessions clear` | æ¸…é™¤ä¼šè¯ |
| `openclaw sessions compact` | å‹ç¼©ä¼šè¯ |
| `openclaw sessions stats` | ç»Ÿè®¡ä¿¡æ¯ |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä¸Šä¸‹æ–‡ç®¡ç†](/zh-CN/concepts/context) - ä¸Šä¸‹æ–‡ç³»ç»Ÿ
- [æ¶ˆæ¯ç³»ç»Ÿ](/zh-CN/concepts/messages) - æ¶ˆæ¯å¤„ç†
- [ä¼šè¯å·¥å…·](/zh-CN/concepts/session-tool) - ä¼šè¯æ“ä½œå·¥å…·
- [ä¼šè¯ä¿®å‰ª](/zh-CN/concepts/session-pruning) - ä¼šè¯æ¸…ç†ç­–ç•¥

---

**è‰¯å¥½çš„ä¼šè¯ç®¡ç†ï¼Œè®©å¯¹è¯æ›´è¿è´¯ã€æ›´é«˜æ•ˆï¼** ğŸ¦
