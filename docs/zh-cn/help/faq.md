---
summary: "OpenClaw 常见问题解答：安装、配置、使用、故障排除的完整问答集"
read_when:
  - 遇到问题需要快速答案
  - 想要深入了解某个功能
  - 寻找最佳实践
title: "常见问题 (FAQ)"
---

# ❓ 常见问题解答

本文档涵盖 OpenClaw 安装、配置、使用过程中最常见的问题。每个问题都包含问题描述、解决方案、原理解释和适用场景，帮助你快速定位并解决问题。

---

## 🎯 学习目标

完成本章节学习后，你将能够：

### 基础目标（必掌握）

- [ ] 理解 OpenClaw 的核心定位和主要用途
- [ ] 掌握快速诊断和解决问题的黄金流程
- [ ] 能够独立完成首次设置和渠道配置
- [ ] 理解配置文件的格式和位置

### 进阶目标（建议掌握）

- [ ] 能够诊断和解决认证、模型相关的复杂问题
- [ ] 掌握技能定制和自动化的进阶用法
- [ ] 理解记忆系统的原理和最佳实践
- [ ] 能够设计适合自己的备份策略

### 专家目标（挑战）

- [ ] 能够为他人讲解 OpenClaw 的设计哲学
- [ ] 能够排查多代理环境下的复杂问题
- [ ] 理解沙箱机制的实现原理
- [ ] 能够制定团队级的 OpenClaw 使用规范

---

## 🚀 第一部分：快速开始与首次设置

### 1.1 我卡住了，最快的解决方法是什么？

**问题场景**：安装完成后，OpenClaw 无法正常工作，但你不知道问题出在哪里。

**黄金60秒诊断流程**：

```bash
# 第一步：查看整体状态
openclaw status

# 第二步：查看详细状态（包含配置）
openclaw status --all

# 第三步：探测网关
openclaw gateway probe

# 第四步：查看实时日志
openclaw logs --follow

# 第五步：运行诊断工具
openclaw doctor
```

**原理说明**：这五个命令按照从简单到深入的顺序检查系统。`status` 检查基本可达性，`probe` 测试网关响应，`logs` 显示实时运行信息，`doctor` 执行全面诊断。

**适用场景**：

| 命令 | 适用情况 | 预期输出 |
|------|----------|----------|
| `status` | 快速确认网关是否运行 | 网关状态、版本信息 |
| `status --all` | 需要详细信息时 | 完整配置、渠道状态 |
| `probe` | 测试网关响应能力 | 连通性测试结果 |
| `logs --follow` | 排查运行时问题 | 实时日志滚动 |
| `doctor` | 系统性诊断 | 健康报告、修复建议 |

**进阶诊断**：如果网关可达但需要深入排查，运行深度探测：

```bash
openclaw status --deep
```

**专家思维模型**：当遇到问题时，采用「假设-验证」思维模式。先形成假设（可能的原因），然后用最小成本的方式验证。例如：网关不响应 → 假设端口被占用 → 用 `lsof -i :18789` 验证。

---

### 1.2 推荐的安装和设置方式是什么？

**问题场景**：你是新用户，不知道如何开始使用 OpenClaw。

**最快路径（三步完成）**：

```bash
# 第一步：使用安装脚本（自动完成 CLI 安装和基本配置）
curl -fsSL https://openclaw.ai/install.sh | bash

# 第二步：运行引导向导（配置模型、渠道、工作区）
openclaw onboard --install-daemon

# 第三步：打开仪表盘开始使用
openclaw dashboard
```

**原理解释**：

| 步骤 | 作用 | 为什么推荐 |
|------|------|------------|
| 安装脚本 | 自动安装 CLI、配置环境 | 避免手动配置的错误 |
| 引导向导 | 交互式配置 | 无需记忆复杂配置语法 |
| 仪表盘 | Web 界面 | 可视化操作，直观易用 |

**替代方案**：如果你只想快速测试，可以跳过渠道配置，直接在浏览器控制界面聊天，无需任何额外设置。

**适用场景**：

| 场景 | 推荐方式 | 说明 |
|------|----------|------|
| 首次安装 | 安装脚本 + 引导向导 | 最完整、最省心 |
| 快速测试 | 仅安装脚本 | 不配置渠道，直接测试 |
| 开发者 | 源码安装 | 需要修改代码 |

---

### 1.3 引导后如何打开仪表盘？

**问题场景**：引导完成但不知道如何访问 Web 界面。

**本地访问（默认配置）**：

```
http://127.0.0.1:18789/
```

**原理说明**：OpenClaw 网关默认绑定到本地回环地址（loopback），意味着只能从本机访问。仪表盘通过 HTTP 协议提供 Web 服务。

**令牌配置**：如果你配置了访问令牌，需要在控制界面的设置中粘贴令牌：

1. 访问 `http://127.0.0.1:18789/__openclaw__/`
2. 进入「设置」
3. 粘贴令牌并保存

**远程访问**：如果需要从其他设备访问，参见 [Web 界面文档](/zh-CN/web) 和 [Tailscale 远程访问文档](/zh-CN/gateway/tailscale)。

**适用场景**：

| 访问方式 | 地址 | 使用场景 |
|----------|------|----------|
| 本地仪表盘 | http://127.0.0.1:18789/ | 日常使用 |
| 控制界面 | http://127.0.0.1:18789/__openclaw__/ | 系统配置 |
| 独立聊天 | http://127.0.0.1:18789/chat | 轻量聊天 |

---

### 1.4 需要什么运行时？

**问题场景**：准备安装 OpenClaw，需要了解系统要求。

**运行时要求**：

| 组件 | 要求 | 说明 |
|------|------|------|
| **Node.js** | >= 22（推荐） | 主要运行时环境 |
| **Bun** | 可用但不推荐 | 存在兼容性问题 |

**为什么推荐 Node.js 22+**：

1. **性能提升**：Node.js 22 带来了显著的性能改进，特别是在 I/O 操作和并发处理方面。
2. **长期支持**：作为当前活跃的 LTS 版本，获得了持续的维护和安全更新。
3. **兼容性保证**：OpenClaw 的核心功能针对 Node.js 22 进行了充分测试。

**Bun 的局限性**：

- WhatsApp 渠道存在兼容性问题
- Telegram 渠道可能遇到运行时错误
- 不推荐用于生产环境的网关运行

**检查运行时版本**：

```bash
# 检查 Node.js 版本
node -v

# 检查 Bun 版本（如果已安装）
bun -v
```

**适用场景**：

| 场景 | 推荐运行时 | 原因 |
|------|------------|------|
| 生产环境 | Node.js 22+ | 稳定、经过测试 |
| 开发环境 | Node.js 22+ | 与生产环境一致 |
| 快速测试 | 任意 | 功能基本可用 |

---

### 1.5 它能在树莓派上运行吗？

**问题场景**：想在树莓派（Raspberry Pi）上部署 OpenClaw。

**可以！** OpenClaw 支持 ARM 架构，可以在树莓派上运行。详细指南参见 [树莓派平台文档](/zh-CN/platforms/raspberry-pi)。

**硬件要求与建议**：

| 组件 | 最低要求 | 推荐配置 |
|------|----------|----------|
| **操作系统** | 32 位 | 64 位（推荐） |
| **内存** | 2GB | 4GB+ |
| **存储** | SD 卡 | 外置 SSD（推荐） |

**为什么推荐 64 位操作系统**：

1. **性能优势**：64 位系统能够更高效地利用内存和 CPU 资源。
2. **软件兼容性**：越来越多的软件只提供 64 位版本。
3. **内存访问**：单个进程可以访问更多内存。

**存储注意事项**：

- **SD 卡寿命**：频繁读写会缩短 SD 卡寿命。考虑使用外置 SSD 或配置为只读模式。
- **性能瓶颈**：SD 卡的速度可能成为系统瓶颈，影响响应时间。

**专家建议**：如果计划长时间运行或处理大量数据，强烈建议使用外置 SSD 而不是 SD 卡。

---

### 1.6 安装通常需要多长时间？

**问题场景**：规划安装时间，了解各阶段耗时。

**安装时间分解**：

| 阶段 | 典型耗时 | 影响因素 |
|------|----------|----------|
| 安装脚本 | 2-5 分钟 | 网络速度、服务器响应 |
| 引导向导 | 5-10 分钟 | 配置选项数量、模型选择 |
| 渠道配置 | 5-15 分钟 | 渠道类型、认证复杂度 |

**总计：15-30 分钟**（取决于选择的配置深度）

**各阶段详细说明**：

**第一阶段：安装脚本（2-5 分钟）**
- 下载 CLI 工具包
- 解压并安装到系统
- 配置环境变量

**第二阶段：引导向导（5-10 分钟）**
- 欢迎和简介
- 模型认证配置
- 工作区设置
- 可选功能选择

**第三阶段：渠道配置（5-15 分钟）**
- WhatsApp：扫码登录
- Telegram：机器人令牌配置
- Discord：OAuth 认证
- Slack：工作区授权

**加速技巧**：

| 技巧 | 节省时间 |
|------|----------|
| 使用安装脚本 | 避免手动配置错误 |
| 提前准备认证信息 | 引导时直接使用 |
| 选择简单渠道开始 | 先用 Telegram 测试 |

---

## 🤖 第二部分：核心概念理解

### 2.1 一句话解释 OpenClaw

**问题场景**：向他人介绍 OpenClaw，需要简洁的定义。

**一句话定义**：

OpenClaw 是**你的个人 AI 助手网关**，连接 WhatsApp、Telegram、Discord 等聊天应用与 Claude、GPT 等 AI 模型，让 AI 通过你熟悉的聊天界面为你服务。

**原理解释**：

```
┌─────────────────────────────────────────────────────────┐
│                      OpenClaw 核心架构                  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   WhatsApp / Telegram / Slack / Discord / ...           │
│              │                                          │
│              ▼                                          │
│   ┌─────────────────────────────────────┐              │
│   │           OpenClaw 网关               │              │
│   │   （消息路由、认证管理、工具执行）     │              │
│   └────────────────┬────────────────────┘              │
│                    │                                        │
│                    ▼                                        │
│   ┌─────────────────────────────────────┐              │
│   │         AI 模型（Claude/GPT/...）     │              │
│   └─────────────────────────────────────┘              │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**核心价值**：

| 价值 | 说明 |
|------|------|
| **统一入口** | 一个界面管理所有聊天渠道 |
| **本地部署** | 数据保存在本地，隐私可控 |
| **高度可定制** | 支持自定义技能、工作流 |
| **多模型支持** | 根据任务选择最佳模型 |

**适用场景**：个人AI助手、编程助手、自动化工作流、知识管理系统。

---

### 2.2 主要用途是什么？

**问题场景**：了解 OpenClaw 的典型使用方式。

**前五大日常用例**：

| 排名 | 用例 | 说明 | 推荐模型 |
|------|------|------|----------|
| 1 | **编程助手** | 代码编写、Review、调试 | Claude Opus 4 |
| 2 | **知识问答** | 即时回答各种问题 | Claude Sonnet 4 |
| 3 | **任务自动化** | 定时任务、数据抓取 | Claude Haiku |
| 4 | **多平台消息** | 统一回复所有渠道 | 任意模型 |
| 5 | **个人知识库** | 存储和检索记忆 | Claude Sonnet 4 |

**用例详细说明**：

**1. 编程助手**（⭐⭐⭐⭐⭐）
- 代码生成和补全
- Pull Request Review
- Bug 排查和修复
- 技术方案讨论

**2. 知识问答**（⭐⭐⭐⭐⭐）
- 技术问题查询
- 文档阅读和总结
- 学习辅助
- 研究资料整理

**3. 任务自动化**（⭐⭐⭐⭐）
- Cron 定时任务
- 数据抓取和处理
- 文件管理
- 提醒和通知

**4. 多平台消息**（⭐⭐⭐⭐）
- WhatsApp/Telegram 统一管理
- 跨平台消息同步
- 群组管理
- 自动回复

**5. 个人知识库**（⭐⭐⭐⭐）
- 记忆存储和检索
- 上下文学习
- 个性化助手
- 长期对话历史

**专家建议**：刚开始使用时，建议从「编程助手」或「知识问答」开始，熟悉后再尝试「任务自动化」等进阶功能。

---

### 2.3 刚设置好，应该先做什么？

**问题场景**：完成初始设置后，下一步怎么做？

**5分钟快速测试流程**：

```bash
# 第一步：打开仪表盘
openclaw dashboard

# 第二步：发送测试消息
# 在聊天框输入：
你好，OpenClaw！

# 第三步：观察 AI 回复
# 确认能够正常对话

# 第四步：配置第一个渠道（推荐 Telegram，最简单）
openclaw channels add telegram

# 第五步：从手机发送消息测试
# 用 Telegram 向机器人发送消息
```

**原理说明**：这五步按「从简单到复杂」的顺序验证系统完整性。先确认核心功能（仪表盘聊天）正常，再扩展到渠道配置。

**第一个技能安装**：

```bash
# 安装网页搜索技能
openclaw skills install web

# 然后测试：
搜索今天的 AI 新闻
```

**技能的作用**：

| 技能类型 | 示例 | 作用 |
|----------|------|------|
| 基础技能 | web、git | 扩展工具能力 |
| 专业技能 | code、analysis | 特定领域增强 |
| 自动化技能 | cron、reminder | 定时任务管理 |

**推荐学习路径**：

| 阶段 | 时间 | 内容 | 目标 |
|------|------|------|------|
| 入门 | 第1天 | 仪表盘聊天、基础对话 | 熟悉交互方式 |
| 进阶 | 第1周 | 渠道配置、技能安装 | 扩展功能边界 |
| 精通 | 第1月 | 自定义技能、自动化 | 深度定制 |

---

## 🔧 第三部分：配置基础

### 3.1 配置是什么格式？在哪里？

**问题场景**：需要手动编辑配置，但不知道配置文件的位置和格式。

**配置文件位置**：`~/.openclaw/openclaw.json`

**配置文件格式**：JSON5（支持注释和尾随逗号的 JSON 超集）

**示例配置**：

```json5
{
  // 网关配置
  gateway: {
    port: 18789,
    bind: "loopback",
    auth: {
      type: "token",
      token: "your-token-here",
    },
  },

  // 默认代理配置
  agents: {
    defaults: {
      model: "anthropic/claude-sonnet-4",
      workspace: "~/.openclaw/workspace",
    },
  },
}
```

**为什么选择 JSON5**：

| 特性 | 传统 JSON | JSON5 |
|------|-----------|-------|
| 注释 | ❌ 不支持 | ✅ 支持 |
| 尾随逗号 | ❌ 报错 | ✅ 允许 |
| 字符串引号 | 必须 | 可选（简单情况） |
| 配置文件 | 更繁琐 | 更灵活 |

**配置文件的层次结构**：

```
openclaw.json
├── gateway          # 网关运行配置
│   ├── port         # 端口号
│   ├── bind         # 绑定地址
│   └── auth         # 认证配置
├── agents           # 代理配置
│   └── defaults     # 默认代理设置
├── channels         # 渠道配置
│   ├── telegram     # Telegram 设置
│   ├── whatsapp     # WhatsApp 设置
│   └── discord      # Discord 设置
├── tools            # 工具配置
│   └── web          # 网页工具
└── models           # 模型配置
```

**适用场景**：

| 场景 | 操作方式 |
|------|----------|
| 快速修改 | `openclaw config set` 命令 |
| 批量修改 | 直接编辑 `openclaw.json` |
| 查看当前 | `openclaw config get` |

---

### 3.2 修改配置后需要重启吗？

**问题场景**：修改配置后，不确定是否需要重启网关。

**答案：取决于配置类型**：

| 配置类型 | 是否需要重启 | 说明 |
|----------|--------------|------|
| **网关配置** | ✅ 需要重启 | bind 端口、认证方式等 |
| **代理配置** | ❌ 无需重启 | 模型、工作区等立即生效 |
| **渠道配置** | ⚠️ 部分需要 | 新渠道需要重启 |

**需要重启的配置**：

```bash
# 修改后需要重启
openclaw gateway restart
```

| 配置项 | 需要重启的原因 |
|--------|----------------|
| `gateway.port` | 端口号变更需要重新绑定 |
| `gateway.bind` | 绑定地址变更需要重新监听 |
| `gateway.auth` | 认证方式变更需要重新初始化 |
| `gateway.tailscale` | Tailscale 配置需要重新建立隧道 |

**无需重启的配置**：

| 配置项 | 热重载机制 |
|--------|------------|
| `agents.defaults.model` | 下次对话自动使用新模型 |
| `agents.defaults.workspace` | 下次任务自动使用新工作区 |
| `channels.*.allowFrom` | 即时生效的权限变更 |
| `tools.web.*` | 工具配置即时生效 |

**专家建议**：养成修改配置后运行 `openclaw status` 的习惯，确认配置已正确加载。

---

### 3.3 如何启用网页搜索？

**问题场景**：想要让 AI 能够搜索网页获取最新信息。

**启用步骤**：

```bash
# 步骤一：获取 Brave Search API Key
# 访问 https://api.search.brave.com/app/dashboard 注册并获取 API Key

# 步骤二：配置 OpenClaw
openclaw configure --section web
```

**手动配置方式**：

```json5
{
  tools: {
    web: {
      search: {
        apiKey: "your-brave-api-key",
      },
    },
  },
}
```

**原理解释**：

| 组件 | 作用 |
|------|------|
| Brave Search API | 提供搜索结果 |
| web_fetch | 直接获取网页内容（无需 API Key） |
| web_search | 搜索并返回结果摘要 |

**网页搜索的工作流程**：

```
用户请求 → OpenClaw → Brave API → 搜索结果 → AI 处理 → 返回给用户
```

**适用场景**：

| 功能 | 需要 API Key | 免费额度 |
|------|--------------|----------|
| web_fetch | ❌ 不需要 | 无限 |
| web_search | ✅ 需要 | 有调用限制 |

**成本考虑**：

| 方式 | 成本 | 适用场景 |
|------|------|----------|
| web_fetch | 免费 | 获取特定网页内容 |
| web_search | 按调用付费 | 需要搜索功能时 |

---

### 3.4 最小的「合理」配置是什么样的？

**问题场景**：需要一个最小可用的配置作为起点。

**最小配置模板**：

```json5
{
  gateway: {
    port: 18789,
    bind: "loopback",
    auth: {
      type: "token",
      token: "auto-generated-or-your-own",
    },
  },
  agents: {
    defaults: {
      model: "anthropic/claude-sonnet-4",
      workspace: "~/.openclaw/workspace",
    },
  },
}
```

**配置项说明**：

| 配置项 | 最小值 | 推荐值 | 说明 |
|--------|--------|--------|------|
| gateway.port | 任意可用端口 | 18789 | 默认端口号 |
| gateway.bind | loopback | loopback | 本地绑定 |
| auth.type | token/password/off | token | 认证方式 |
| agents.model | 任意有效模型 | claude-sonnet-4 | 默认模型 |

**为什么这个配置是「合理」的**：

1. **安全性**：绑定到 loopback，外部无法访问
2. **可用性**：使用 token 认证，平衡安全和便利
3. **完整性**：包含所有必需配置项
4. **可扩展**：留有扩展空间（渠道、技能等）

**最小 vs 完整**：

| 对比项 | 最小配置 | 完整配置 |
|--------|----------|----------|
| 代码量 | ~15 行 | ~200 行 |
| 功能 | 基础对话 | 全功能 |
| 学习曲线 | 低 | 高 |
| 适用人群 | 新手 | 高级用户 |

---

## 🔐 第四部分：认证与模型

### 4.1 需要 Claude 或 OpenAI 订阅吗？

**问题场景**：使用 OpenClaw 是否需要付费订阅 AI 服务？

**答案：不需要订阅，但需要一种认证方式**。

**认证方式对比**：

| 方式 | 成本模型 | 推荐度 | 适用场景 |
|------|----------|--------|----------|
| Anthropic API Key | 按量付费 | ⭐⭐⭐ | 通用场景 |
| OpenAI API Key | 按量付费 | ⭐⭐⭐ | 通用场景 |
| Claude Code OAuth | 订阅制 | ⭐⭐⭐ | Claude 订阅用户 |
| OpenAI Codex OAuth | 订阅制 | ⭐⭐⭐ | OpenAI 订阅用户 |
| 本地模型（Ollama） | 免费 | ⭐⭐ | 隐私敏感、离线 |

**按量付费 vs 订阅制**：

| 对比维度 | 按量付费（API Key） | 订阅制（OAuth） |
|----------|---------------------|-----------------|
| 成本透明度 | 每次调用显示消耗 | 固定月费 |
| 使用灵活性 | 可随时调整用量 | 受订阅级别限制 |
| 账户管理 | 独立管理 | 与订阅绑定 |
| 免费额度 | 通常有少量免费 | 通常无免费 |

**推荐选择**：

| 用户类型 | 推荐方式 | 理由 |
|----------|----------|------|
| 轻度使用者 | API Key | 按需付费 |
| 重度使用者 | Claude Pro/Max | 成本更可控 |
| 隐私敏感 | Ollama | 完全离线 |
| 企业用户 | API Key | 易于审计 |

---

### 4.2 Anthropic「setup-token」认证如何工作？

**问题场景**：如何获取和使用 setup-token 进行认证。

**工作原理**：

setup-token 是一种临时认证令牌，用于在引导过程中完成模型认证。

**获取步骤**：

```bash
# 第一步：在任何机器上运行（需要有 Claude CLI）
claude setup-token

# 第二步：复制生成的 token（格式类似于：eyJhbGciOi...）

# 第三步：在引导向导中粘贴 token
# 向导会自动配置认证信息
```

**原理说明**：

```
claude setup-token
      │
      ▼
   生成临时 token
      │
      ▼
粘贴到 OpenClaw 向导
      │
      ▼
向导使用 token 获取 API 权限
      │
      ▼
保存凭证到 ~/.openclaw/credentials/
```

**适用场景**：

| 场景 | 是否需要 setup-token |
|------|---------------------|
| 首次配置 | ✅ 需要 |
| 重新认证 | ✅ 需要 |
| 凭证过期 | ✅ 需要 |
| 切换账户 | ✅ 需要 |

**安全注意事项**：

- setup-token 是临时凭证，有效期有限
- 不要与他人分享你的 token
- 如果 token 泄露，立即撤销并重新生成

---

### 4.3 支持 Claude 订阅认证吗？

**问题场景**：我有 Claude Pro/Max 订阅，能否直接使用？

**支持！** 两种方式：

**方式一：Claude Code CLI OAuth（推荐）**

引导向导会自动检查 Keychain 或 credentials.json 中的现有认证。

**方式二：Setup-token**

```bash
claude setup-token
```

**OAuth vs API Key**：

| 对比 | Claude Code OAuth | API Key |
|------|-------------------|----------|
| 认证来源 | Claude CLI 已登录状态 | 独立 API Key |
| 凭证存储 | Keychain/credentials.json | 直接配置 |
| 续期 | 自动（CLI 负责） | 需手动管理 |
| 权限范围 | 与订阅绑定 | 独立控制 |

**适用场景**：

| 场景 | 推荐方式 |
|------|----------|
| 已有 Claude CLI 登录 | OAuth（最简便） |
| 只有 API Key | API Key 配置 |
| 多账户切换 | setup-token |

---

### 4.4 为什么会出现 HTTP 429 速率限制错误？

**问题场景**：调用 API 时收到「Too Many Requests」错误。

**错误表现**：

```
HTTP 429 Too Many Requests
Rate limit exceeded. Please wait before retrying.
```

**原因分析**：

| 原因 | 说明 | 解决难度 |
|------|------|----------|
| 免费 tier 限制 | 免费账户的调用次数有限 | ⭐ 容易 |
| 并发请求过多 | 同时发送了太多请求 | ⭐ 容易 |
| 瞬时峰值 | 短时间内请求过于集中 | ⭐ 容易 |
| 账户限制 | 账户级别设置了特殊限制 | ⭐⭐ 较难 |

**解决方案**：

| 方案 | 操作 | 效果 |
|------|------|------|
| 等待重试 | 稍后重新发送 | 临时缓解 |
| 升级付费 tier | 升级到 Pro/Max | 根本解决 |
| 减少并发 | 控制同时进行的请求数 | 预防措施 |
| 检查循环调用 | 排查是否存在无限循环 | 修复 bug |

**诊断步骤**：

```bash
# 检查当前速率限制状态
openclaw models status

# 查看详细的模型使用统计
openclaw status --all | grep -A 10 "rate"
```

**预防措施**：

1. 实现请求队列，控制并发数量
2. 添加重试机制（指数退避）
3. 监控使用量，在接近限制时预警
4. 考虑使用缓存减少重复请求

---

### 4.5 支持 AWS Bedrock 吗？

**问题场景**：企业使用 AWS，想通过 Bedrock 调用 Claude。

**支持！** 详细配置参见 [AWS Bedrock 文档](/zh-CN/bedrock)。

**Bedrock 的优势**：

| 优势 | 说明 |
|------|------|
| 企业级安全 | AWS 基础设施保障 |
| 直接访问 | 无需 Anthropic 中转 |
| 合规要求 | 满足企业合规需求 |
| 成本控制 | AWS 统一账单 |

**适用场景**：

| 场景 | 是否推荐 Bedrock |
|------|-----------------|
| 企业部署 | ✅ 强烈推荐 |
| 个人使用 | ❌ 过于复杂 |
| 多云策略 | ✅ 可行 |
| 成本敏感 | ⚠️ 需要评估 |

---

### 4.6 可以使用本地模型吗？

**问题场景**：不想使用云端 API，想完全离线运行。

**支持的本地模型**：

| 模型平台 | 特点 | 推荐度 |
|----------|------|----------|
| Ollama | 易于使用、流行 | ⭐⭐⭐ |
| llama.cpp | 高性能、轻量 | ⭐⭐ |
| vLLM | 高吞吐量、服务器级 | ⭐⭐ |

**详细配置**：参见 [本地模型文档](/zh-CN/gateway/local-models) 和 [Ollama 提供商文档](/zh-CN/providers/ollama)。

**适用场景**：

| 场景 | 推荐程度 | 理由 |
|------|----------|------|
| 隐私敏感 | ✅ 强烈推荐 | 数据完全不离开本地 |
| 离线使用 | ✅ 强烈推荐 | 无需网络连接 |
| 成本控制 | ✅ 强烈推荐 | 无 API 费用 |
| 复杂编程任务 | ❌ 不推荐 | 本地模型能力有限 |
| 简单对话 | ✅ 可行 | 足够使用 |

**专家提醒**：本地模型在推理能力和响应速度方面通常不如云端模型，仅建议在特定场景下使用。

---

## 💬 第五部分：渠道与消息

### 5.1 Telegram 的 `allowFrom` 填什么？

**问题场景**：配置 Telegram 渠道时，不知道 allowFrom 如何设置。

**allowFrom 的作用**：控制谁可以向机器人发送消息。

**配置方式**：

```json5
{
  channels: {
    telegram: {
      allowFrom: ["your_username", "friend_username"],
    },
  },
}
```

**获取你的 Telegram 用户名**：

1. 打开 Telegram
2. 搜索 `@userinfobot`
3. 发送 `/start`
4. 机器人会回复你的用户 ID 和用户名

**allowFrom 的工作原理**：

```
消息到达 → 检查 sender 在 allowFrom 中？
         │
         ├── 在 ──→ 接受消息
         │
         └── 不在 ──→ 拒绝消息（除非是群组管理员）
```

**安全考虑**：

| 设置 | 安全级别 | 适用场景 |
|------|----------|----------|
| 特定用户名列表 | 高 | 私人使用 |
| "*"（全部允许） | 低 | 公开机器人 |
| 空列表 | 最高 | 最严格的控制 |

**专家建议**：对于个人使用，建议设置具体用户名列表，避免收到陌生人消息。

---

### 5.2 WhatsApp 群组需要添加机器人账号吗？

**问题场景**：在 WhatsApp 群组中使用 OpenClaw。

**不需要！** OpenClaw 使用 WhatsApp Web 协议，**不是**独立的机器人账号。

**工作原理**：

| 方式 | 说明 | 是否需要独立账号 |
|------|------|------------------|
| 传统机器人 | WhatsApp Business API | ✅ 需要 |
| OpenClaw | WhatsApp Web 协议 | ❌ 不需要 |

**OpenClaw 的工作方式**：

```
你的 WhatsApp 账号 ──登录──▶ OpenClaw（模拟网页版）
                                        │
                                        ▼
                              接收/发送消息（使用你的账号）
```

**优势**：

| 优势 | 说明 |
|------|------|
| 无需额外账号 | 使用现有的 WhatsApp 账号 |
| 完整功能 | 与网页版 WhatsApp 功能一致 |
| 隐私保护 | 消息不经过第三方服务器 |

**注意事项**：

- 需要保持 WhatsApp Web 会话活跃
- 手机需要联网（用于同步）
- 不支持多设备同时在线（会被踢出）

---

### 5.3 为什么 OpenClaw 在群组中不回复？

**问题场景**：在群组中 @机器人，但没有收到回复。

**常见原因排查**：

| 原因 | 检查方法 | 解决方式 |
|------|----------|----------|
| 未批准配对 | 检查配对状态 | 运行 `openclaw pairing approve` |
| 群组不在允许列表 | 检查配置 | 添加群组 ID 到允许列表 |
| 消息格式不对 | 检查触发方式 | 使用正确的 @ 格式 |
| 上下文限制 | 检查上下文窗口 | 清理旧对话 |

**诊断步骤**：

```bash
# 查看配对状态
openclaw pairing list whatsapp

# 批准配对（如果需要）
openclaw pairing approve whatsapp <code>
```

**群组配置详解**：

| 配置项 | 说明 | 必填 |
|--------|------|------|
| allowFrom | 允许发送消息的用户 | ✅ |
| groups | 允许的群组列表 | ❌ |
| requireMention | 是否需要 @ 机器人 | ❌ |

**专家建议**：首次在群组中使用时，建议先在私聊中测试，确认基本功能正常后再添加到群组。

---

### 5.4 群组/线程与 DM 共享上下文吗？

**问题场景**：担心群组对话的上下文会影响私聊。

**默认行为**：**不共享**。每个会话类型有独立的上下文。

| 会话类型 | 上下文隔离 | 说明 |
|----------|------------|------|
| DM（私聊） | 完全独立 | 私密的对话历史 |
| 群组 | 完全独立 | 群组专用上下文 |
| 线程 | 完全独立 | 线程专用上下文 |

**上下文隔离的原理**：

```
┌─────────────────────────────────────────┐
│ OpenClaw 记忆系统                        │
├─────────────────────────────────────────┤
│                                          │
│  ┌─────────────┐                         │
│  │ DM 对话 A   │  ← 独立的上下文窗口      │
│  └─────────────┘                         │
│                                          │
│  ┌─────────────┐                         │
│  │ 群组对话 B  │  ← 独立的上下文窗口      │
│  └─────────────┘                         │
│                                          │
│  ┌─────────────┐                         │
│  │ 线程对话 C  │  ← 独立的上下文窗口      │
│  └─────────────┘                         │
│                                          │
└─────────────────────────────────────────┘
```

**可以配置共享吗**：技术上可以，但不推荐（存在隐私问题）。

**专家建议**：保持默认的上下文隔离是最佳实践，既保护隐私，又避免上下文混淆。

---

## 🛠️ 第六部分：技能与自动化

### 6.1 如何自定义技能？

**问题场景**：想要修改或创建自己的技能。

**两种方式**：

**方式一：修改现有技能**

```bash
# 找到技能目录
openclaw skills dir

# 进入技能目录编辑
# 通常位于 ~/.openclaw/skills/<skill-name>/
```

**方式二：创建新技能**

详细指南参见 [创建技能文档](/zh-CN/tools/creating-skills)。

**技能的结构**：

```
skills/
└── <skill-name>/
    ├── SKILL.md          # 技能定义和描述
    ├── prompts/          # 提示词模板
    ├── tools/            # 工具定义
    └── config.json       # 技能配置
```

**专家建议**：先修改现有技能熟悉结构，再尝试创建新技能。

---

### 6.2 可以从自定义文件夹加载技能吗？

**问题场景**：想要使用自己维护的技能仓库。

**可以！** 通过配置 `skills.path` 指定自定义路径：

```json5
{
  skills: {
    path: "/path/to/your/skills",
  },
}
```

**使用场景**：

| 场景 | 推荐程度 | 理由 |
|------|----------|------|
| 团队共享技能 | ✅ 推荐 | 统一管理 |
| 自定义技能库 | ✅ 推荐 | 按需加载 |
| 技能开发测试 | ✅ 推荐 | 快速迭代 |

**注意事项**：

- 确保路径正确且可访问
- 自定义技能需要遵循 OpenClaw 技能规范
- 调试时注意查看错误日志

---

### 6.3 如何为不同任务使用不同模型？

**问题场景**：编程任务想用 Claude Opus，日常对话想用 Haiku。

**模型别名和路由配置**：

```json5
{
  models: {
    aliases: {
      fast: "openai/gpt-4.1-mini",
      coding: "anthropic/claude-opus-4",
      cheap: "moonshot/kimi-k2",
    },
  },
  routing: {
    agents: {
      coding: {
        model: "coding",
      },
    },
  },
}
```

**使用方式**：

```
# 使用别名指定模型
/model coding

# 或在配置中预设
模型将自动切换到指定的别名
```

**模型选择策略**：

| 任务类型 | 推荐模型 | 别名建议 |
|----------|----------|----------|
| 复杂编程 | Claude Opus 4 | coding |
| 快速对话 | Claude Haiku | fast |
| 代码审查 | Claude Sonnet 4 | review |
| 长文档 | Claude Sonnet 4 | long |

**专家建议**：为高频任务设置模型别名，提高使用效率。

---

### 6.4 机器人做重活时卡住怎么办？

**问题场景**：执行长时间任务时，机器人似乎卡住了。

**原因分析**：同步执行阻塞了消息循环，导致机器人无法响应。

**解决方案**：

| 方案 | 说明 | 适用场景 |
|------|------|----------|
| 使用子代理 | `delegate_task` | 复杂多步骤任务 |
| 启用流式响应 | streaming | 长文本生成 |
| 增加超时设置 | timeout | 长时间运行任务 |

**配置示例**：

```json5
{
  agents: {
    defaults: {
      timeout: 300000,  // 5分钟
      streaming: true,   // 启用流式输出
    },
  },
}
```

**诊断方法**：

```bash
# 查看当前活跃任务
openclaw status

# 查看详细的任务状态
openclaw status --deep
```

**专家建议**：对于超过 1 分钟的任务，建议拆分成多个子任务，或使用流式响应。

---

### 6.5 Cron 或提醒不触发怎么办？

**问题场景**：设置了定时任务，但没有按时执行。

**检查清单**：

```bash
# 第一步：检查网关是否运行
openclaw gateway status

# 第二步：检查守护进程是否启用
openclaw cron list

# 第三步：检查时区设置
date
timedatectl

# 第四步：检查 Cron 表达式
openclaw cron show <job-id>
```

**常见问题与解决**：

| 问题 | 原因 | 解决方式 |
|------|------|----------|
| 网关未运行 | 服务停止 | `openclaw gateway restart` |
| 时区错误 | 系统时区设置不对 | 配置正确时区 |
| Cron 表达式错误 | 语法问题 | 检查表达式语法 |
| 任务被跳过 | 并发限制 | 检查并发配置 |

**诊断步骤**：

```bash
# 查看所有 Cron 任务
openclaw cron list

# 查看任务详情
openclaw cron show <task-id>

# 查看执行历史
openclaw cron history
```

**详细文档**：参见 [Cron 任务文档](/zh-CN/automation/cron-jobs)。

---

## 🔒 第七部分：沙箱与记忆

### 7.1 有专门的沙箱文档吗？

**问题场景**：需要了解沙箱机制和配置。

**有！** 详细文档：

- [沙箱配置文档](/zh-CN/gateway/sandboxing)
- [沙箱 vs 工具策略 vs 提升权限文档](/zh-CN/gateway/sandbox-vs-tool-policy-vs-elevated)

**沙箱的作用**：

| 作用 | 说明 |
|------|------|
| 安全隔离 | 防止恶意代码影响主机 |
| 资源限制 | 防止资源耗尽 |
| 环境一致性 | 确保可重复的执行环境 |

---

### 7.2 记忆如何工作？

**问题场景**：了解 OpenClaw 的记忆系统原理。

**两层记忆系统**：

| 层级 | 存储位置 | 生命周期 | 容量 |
|------|----------|----------|------|
| **短期记忆** | LLM 上下文窗口 | 会话期间 | 受模型限制 |
| **长期记忆** | `memory/` 目录 | 永久 | 磁盘限制 |

**短期记忆（会话上下文）**：

```
当前对话
    │
    ▼
最近 N 条消息（模型上下文窗口内）
    │
    ▼
LLM 自动管理，无需人工干预
```

**长期记忆（语义搜索）**：

```
存储位置：~/.openclaw/memory/
├── memory/           # 记忆文件
├── embeddings/       # 向量索引
└── index/            # 搜索索引
```

**原理解释**：

| 组件 | 技术实现 |
|------|----------|
| 短期记忆 | Transformer 上下文窗口 |
| 长期记忆 | 向量数据库 + 语义搜索 |
| 搜索 | OpenAI embedding（需要 API Key） |

---

### 7.3 记忆总是忘记事情，如何让记忆持久？

**问题场景**：AI 总是忘记之前讨论的内容。

**记忆持久化方法**：

| 方法 | 操作 | 可靠性 |
|------|------|--------|
| `/remember` 命令 | 显式存储重要信息 | 高 |
| `memory/` 目录 | 直接编辑记忆文件 | 高 |
| 自动记忆提取 | 配置自动摘要生成 | 中 |
| 定期回顾 | 手动维护 MEMORY.md | 高 |

**实践建议**：

```bash
# 在对话中使用
/remember 用户名是张三，在上海工作

# 或者直接编辑
open ~/.openclaw/workspace/MEMORY.md
```

**记忆增强策略**：

| 策略 | 效果 | 维护成本 |
|------|------|----------|
| 重要信息立即记忆 | ⭐⭐⭐⭐⭐ | 低 |
| 每日回顾整理 | ⭐⭐⭐⭐ | 中 |
| 结构化知识库 | ⭐⭐⭐⭐⭐ | 高 |
| 自动摘要生成 | ⭐⭐⭐ | 低 |

---

### 7.4 语义记忆搜索需要 OpenAI API Key 吗？

**问题场景**：不想给 OpenAI 付费，能否使用本地方案。

**答案**：是的，当前版本需要 OpenAI API Key。

**原因**：语义搜索依赖 text-embedding 模型生成向量。

**替代方案**：

| 方案 | 说明 | 推荐度 |
|------|------|----------|
| OpenAI API Key | 完整功能 | ⭐⭐⭐⭐ |
| 本地 embedding | 自行部署模型 | ⭐⭐ |
| 关键词搜索 | 替代语义搜索 | ⭐⭐⭐ |

**配置示例**：

```json5
{
  memory: {
    semanticSearch: {
      provider: "openai",
      model: "text-embedding-3-small",
    },
  },
}
```

**专家建议**：对于隐私敏感场景，可以考虑使用 Ollama 部署本地 embedding 模型。

---

## 📁 第八部分：文件位置与数据管理

### 8.1 所有数据都保存在本地吗？

**问题场景**：担心数据隐私和存储位置。

**是的！** OpenClaw 的核心设计理念是**数据主权**：

| 数据类型 | 存储位置 | 云端传输 |
|----------|----------|----------|
| 配置信息 | `~/.openclaw/` | ❌ 不传输 |
| 认证凭证 | `~/.openclaw/credentials/` | ❌ 不传输 |
| 会话历史 | `~/.openclaw/sessions/` | ❌ 不传输 |
| 记忆文件 | `~/.openclaw/workspace/` | ❌ 不传输 |
| AI API 调用 | → Anthropic/OpenAI | ✅ 仅此 |

**架构设计原则**：

```
┌─────────────────────────────────────────────────────────┐
│                      OpenClaw 数据流                     │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  本地存储（不离开你的设备）                               │
│  ├── ~/.openclaw/                                       │
│  │   ├── openclaw.json  ← 配置                          │
│  │   ├── credentials/   ← API 密钥                      │
│  │   ├── agents/        ← 会话数据                      │
│  │   └── workspace/     ← 你的文件                      │
│  │                                                         │
│  └── 只在需要时发送到 AI 服务                            │
│      └── Anthropic/OpenAI API（最小必要数据）            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**优势**：

| 优势 | 说明 |
|------|------|
| 隐私保护 | 数据不经过第三方服务器 |
| 离线可用 | 基本功能无需网络 |
| 完全控制 | 可以完全掌控自己的数据 |
| 合规友好 | 满足数据保护法规要求 |

---

### 8.2 OpenClaw 数据存储在哪里？

**默认位置**：`~/.openclaw/`

**目录结构**：

| 目录/文件 | 用途 | 是否重要 |
|-----------|------|----------|
| `openclaw.json` | 主配置文件 | ⚠️ 备份推荐 |
| `credentials/` | OAuth 凭证 | ⚠️ 备份推荐 |
| `agents/` | 代理配置和数据 | ✅ 强烈推荐备份 |
| `workspace/` | 默认工作区 | ✅ 强烈推荐备份 |
| `sessions/` | 会话存储 | ✅ 推荐备份 |
| `skills/` | 已安装技能 | ❌ 可重新安装 |
| `logs/` | 日志文件 | ❌ 不需要 |

**详细说明**：

```
~/.openclaw/
├── openclaw.json          # 主配置文件
├── credentials/            # 认证信息
│   ├── anthropic.json    # Claude 凭证
│   └── openai.json       # OpenAI 凭证
├── agents/                # 代理数据
│   └── <agentId>/        # 特定代理
│       ├── sessions/     # 会话历史
│       └── workspace/    # 代理工作区
├── workspace/             # 默认工作区
│   ├── MEMORY.md         # 记忆文件
│   ├── AGENTS.md         # 代理提示
│   └── skills/           # 自定义技能
├── sessions/              # 会话存储
├── skills/                # 安装的技能
└── logs/                  # 日志文件
```

---

### 8.3 AGENTS.md / SOUL.md / USER.md / MEMORY.md 应该放在哪里？

**问题场景**：想要配置个性化的提示词和记忆。

**放置位置**：

| 文件 | 位置 | 说明 |
|------|------|------|
| AGENTS.md | `~/.openclaw/workspace/` | 全局代理配置 |
| SOUL.md | `~/.openclaw/workspace/` | AI 人格定义 |
| USER.md | `~/.openclaw/workspace/` | 用户信息 |
| MEMORY.md | `~/.openclaw/workspace/` | 长期记忆 |

**或放置在代理特定位置**：`~/.openclaw/agents/<agentId>/workspace/`

**文件作用**：

| 文件 | 作用 | 加载时机 |
|------|------|----------|
| AGENTS.md | 定义代理行为和提示词 | 会话开始时 |
| SOUL.md | 定义 AI 的人格特征 | 会话开始时 |
| USER.md | 提供用户背景信息 | 会话开始时 |
| MEMORY.md | 存储长期记忆 | 语义搜索时 |

**配置示例**：

```json5
{
  agents: {
    defaults: {
      workspace: "~/.openclaw/workspace",
    },
  },
}
```

---

### 8.4 推荐的备份策略是什么？

**问题场景**：想要保护数据，防止丢失。

**备份内容**：

```bash
# 配置文件
cp ~/.openclaw/openclaw.json backup/

# 凭证
cp -r ~/.openclaw/credentials backup/

# 工作区
cp -r ~/.openclaw/workspace backup/

# 会话（可选）
cp -r ~/.openclaw/sessions backup/
```

**自动化备份**：

```bash
# 使用 cron 每天凌晨 2 点备份
openclaw cron add \
  --name "daily-backup" \
  --schedule "0 2 * * *" \
  --command "tar czf ~/backups/openclaw-\$(date +\%Y\%m\%d).tar.gz ~/.openclaw/"
```

**备份策略对比**：

| 策略 | 频率 | 保留时间 | 自动化程度 |
|------|------|----------|------------|
| 每日备份 | 每天 | 7天 | 完全自动 |
| 每周备份 | 每周 | 4周 | 完全自动 |
| 手动备份 | 按需 | 无限 | 手动 |
| 实时同步 | 实时 | 有限 | 完全自动 |

**专家建议**：

1. 至少保留最近 3 个备份版本
2. 将备份存储在不同位置（云端 + 本地）
3. 定期测试备份恢复流程

---

### 8.5 如何完全卸载 OpenClaw？

**问题场景**：不再需要 OpenClaw，想要干净地移除。

**卸载步骤**：

```bash
# 第一步：停止网关服务
openclaw gateway stop

# 第二步：卸载 CLI
npm uninstall -g openclaw

# 第三步：删除数据（谨慎！）
rm -rf ~/.openclaw
```

**详细指南**：参见 [卸载指南文档](/zh-CN/install/uninstall)。

**注意事项**：

| 步骤 | 风险 | 建议 |
|------|------|------|
| 停止网关 | 低 | 确认没有正在进行的任务 |
| 卸载 CLI | 低 | 只删除 CLI 工具 |
| 删除数据 | 高 | 确认不需要任何数据后再执行 |

**专家建议**：在执行删除数据之前，确保已经完成所有必要的备份。

---

## 🆘 第九部分：提交问题

### 9.1 当提交 GitHub Issue 时

**问题场景**：遇到无法解决的问题，需要寻求社区帮助。

**必需信息**：

```bash
# 粘贴安全报告
openclaw status --all
```

**建议包含的信息**：

| 信息类型 | 命令/方法 | 重要性 |
|----------|----------|--------|
| 系统状态 | `openclaw status --all` | ✅ 必需 |
| 错误日志 | `openclaw logs --follow` | ✅ 必需 |
| 配置信息 | `openclaw config get` | ✅ 推荐 |
| 复现步骤 | 手动描述 | ✅ 必需 |

**Issue 模板**：

```markdown
**问题描述**
[清晰描述问题]

**复现步骤**
1. [步骤1]
2. [步骤2]
3. [步骤3]

**预期行为**
[描述预期发生什么]

**实际行为**
[描述实际发生什么]

**环境信息**
- OS: [例如 macOS 14, Ubuntu 22.04]
- Node: [输出 `node -v`]
- OpenClaw: [输出 `openclaw --version`]

**调试输出**
```
[粘贴 `openclaw status --all` 输出]
```

**日志**
```
[粘贴相关日志]
```
```

---

## 📚 第十部分：相关资源

**继续深入学习**：

- [故障排除](/zh-CN/help/troubleshooting) - 系统性故障排查
- [安装指南](/zh-CN/install) - 各种安装方式
- [Web 界面文档](/zh-CN/web) - Web 界面使用
- [Discord 社区](https://discord.gg/clawd) - 社区支持

**故障快速入口**：

1. 运行 `openclaw doctor` 进行诊断
2. 查看 [故障排除文档](/zh-CN/help/troubleshooting)
3. 搜索 [GitHub Issues](https://github.com/openclaw/openclaw/issues)
4. 加入 Discord 社区提问

---

## 🎓 章节总结

### 学习目标完成检查

回顾本文档的学习目标：

#### 基础目标（必掌握）

- [ ] 理解 OpenClaw 的核心定位和主要用途
- [ ] 掌握快速诊断和解决问题的黄金流程
- [ ] 能够独立完成首次设置和渠道配置
- [ ] 理解配置文件的格式和位置

#### 进阶目标（建议掌握）

- [ ] 能够诊断和解决认证、模型相关的复杂问题
- [ ] 掌握技能定制和自动化的进阶用法
- [ ] 理解记忆系统的原理和最佳实践
- [ ] 能够设计适合自己的备份策略

#### 专家目标（挑战）

- [ ] 能够为他人讲解 OpenClaw 的设计哲学
- [ ] 能够排查多代理环境下的复杂问题
- [ ] 理解沙箱机制的实现原理
- [ ] 能够制定团队级的 OpenClaw 使用规范

### 专家思维模型回顾

| 思维模型 | 应用场景 |
|----------|----------|
| 假设-验证 | 故障排查 |
| 从简单到复杂 | 系统验证 |
| 分层诊断 | 多层次问题 |
| 最小成本验证 | 快速定位 |

### 下一步学习

| 主题 | 推荐程度 | 说明 |
|------|----------|------|
| 故障排除 | ⭐⭐⭐⭐⭐ | 遇到问题时必备 |
| 安装指南 | ⭐⭐⭐⭐ | 配置新环境时 |
| Web 界面 | ⭐⭐⭐ | 使用 Web 功能时 |
| 高级配置 | ⭐⭐ | 深度定制时 |

---

**还有问题？** 查看 [故障排除文档](/zh-CN/help/troubleshooting) 或加入 [Discord 社区](https://discord.gg/clawd) 获取帮助。
