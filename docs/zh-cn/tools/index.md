---
summary: "OpenClaw工具与技能系统完整指南——文件操作、命令执行、浏览器自动化等核心能力"
read_when:
  - 首次了解OpenClaw的工具能力体系
  - 配置技能系统和工具权限
  - 自定义工具使用策略和安全控制
title: "工具与技能系统"
---

# 工具与技能系统

本指南全面介绍OpenClaw的工具系统和技能机制，帮助您深入理解AI助手可以执行的操作、能力边界以及安全配置策略。完成本章节学习后，您将能够根据不同场景选择合适的工具、配置工具权限，并理解工具系统的设计原理。

## 学习目标

完成本章节学习后，您将能够：

### 基础目标（必掌握）

- 理解工具（Tools）和技能（Skills）的核心概念及其区别
- 掌握文件操作工具（read、write、edit、glob、grep）的基本用法
- 了解命令执行工具（bash、exec）的使用场景和风险
- 理解网页工具（browser、web、firecrawl）的能力边界

### 进阶目标（建议掌握）

- 配置工具的启用/禁用和访问权限
- 为不同代理配置差异化的工具限制
- 理解技能系统的组成要素和配置方法
- 掌握开发环境、生产环境和受限环境的工具配置策略

### 专家目标（挑战）

- 设计安全的工具权限体系
- 优化工具配置以平衡功能与安全
- 为团队制定工具使用规范

---

## 第一部分：核心概念解析

### 为什么需要工具系统

在理解具体用法之前，我们需要先理解设计者为什么这样设计。工具系统的核心价值在于：

**问题**：AI助手虽然具备强大的语言理解和生成能力，但无法直接访问文件系统、执行命令或与外部系统交互。

**解决方案**：通过工具（Tools）扩展AI助手的能力边界，让它能够：
- 读取和修改文件
- 执行系统命令
- 自动化浏览器操作
- 调用外部API和服务

**设计决策**：
- 工具采用声明式接口，AI通过结构化调用使用工具
- 工具调用经过权限检查，确保操作在允许范围内
- 工具执行结果返回给AI，形成观察-思考-行动的闭环

### 工具与技能的区别

很多初学者会混淆工具和技能的概念，让我们明确它们的区别：

```
工具（Tools）
├── 定义：AI代理可以直接调用的外部能力接口
├── 特点：原子化、功能单一、直接执行
├── 示例：read读取文件、write写入文件
└── 位置：内置于OpenClaw核心

技能（Skills）
├── 定义：预配置的工具体验，针对特定任务优化
├── 特点：组合式、场景化、包含提示词和约束
├── 示例：default技能组合read/write/edit工具
└── 位置：内置或通过ClawHub安装
```

**简单类比**：如果工具是乐高积木块，技能就是用这些积木搭建好的特定模型（如汽车、房子）。

### 工具分类体系

OpenClaw的工具按照风险等级分为三个层次：

| 风险等级 | 工具 | 潜在风险 | 适用场景 |
|----------|------|----------|----------|
| **安全** | read、glob、grep | 低——仅读取数据 | 文件浏览、内容搜索 |
| **中等** | write、edit、web | 中——可修改数据 | 文件编辑、网页搜索 |
| **高风险** | bash、exec、browser | 高——可执行任意操作 | 命令执行、浏览器自动化 |

**专家思维模型：最小权限原则**

在配置工具权限时，始终遵循最小权限原则：
- 只授予完成任务所需的最小工具集
- 生产环境应禁用高风险工具
- 使用沙箱环境隔离危险操作

---

## 第二部分：工具详解

### 2.1 文件操作工具

文件操作工具是日常使用最频繁的工具集，它们允许AI读取、搜索和修改文件。

#### read工具——读取文件内容

**功能说明**：read工具用于读取文件的完整内容，支持大文件的部分读取。

**使用场景**：
- 查看源代码文件
- 读取配置文件
- 分析日志文件
- 浏览文档内容

**调用示例**：
```json
{
  "tool": "read",
  "path": "/path/to/file.txt",
  "limit": 100,
  "offset": 0
}
```

**参数说明**：
- `path`（必填）：文件路径
- `limit`（可选）：限制返回的行数，默认2000行
- `offset`（可选）：从指定行开始读取

**注意事项**：
- 无法读取二进制文件（图片、视频等）
- 对于超大文件，建议使用limit参数分批读取
- 权限受工作区目录限制

#### write工具——创建或覆盖文件

**功能说明**：write工具用于创建新文件或覆盖现有文件内容。

**使用场景**：
- 生成代码文件
- 编写文档
- 创建配置文件
- 输出分析结果

**调用示例**：
```json
{
  "tool": "write",
  "path": "/path/to/new-file.txt",
  "content": "这是文件内容"
}
```

**安全警告**：
- write工具可以覆盖现有文件，使用时需谨慎
- 建议在重要文件操作前使用read确认文件状态
- 避免写入系统关键目录

#### edit工具——精确编辑文件

**功能说明**：edit工具用于对文件进行精确的部分编辑，支持字符串替换。

**使用场景**：
- 修改代码中的特定行
- 修复拼写错误
- 调整配置参数
- 重构代码片段

**调用示例**：
```json
{
  "tool": "edit",
  "path": "/path/to/file.txt",
  "oldString": "旧的代码内容",
  "newString": "新的代码内容"
}
```

**使用技巧**：
- oldString需要精确匹配，建议包含足够的上下文
- 对于大型文件，先用read查看再用edit修改
- 多次小幅修改比一次大幅修改更安全

#### glob工具——模式匹配文件

**功能说明**：glob工具通过通配符模式查找文件，返回匹配的文件路径列表。

**使用场景**：
- 查找特定类型的文件（如所有.ts文件）
- 按目录结构浏览项目
- 批量处理相关文件
- 统计项目文件分布

**调用示例**：
```json
{
  "tool": "glob",
  "pattern": "**/*.test.ts"
}
```

**模式语法**：
- `*` 匹配任意数量的字符（不包括目录分隔符）
- `**` 匹配任意数量的目录
- `?` 匹配单个字符
- `[abc]` 匹配括号内的任意字符

#### grep工具——内容搜索

**功能说明**：grep工具在文件中搜索匹配的文本模式，返回包含匹配的行。

**使用场景**：
- 搜索函数定义
- 查找特定配置项
- 统计关键词出现次数
- 分析代码依赖

**调用示例**：
```json
{
  "tool": "grep",
  "pattern": "function.*",
  "include": "*.ts"
}
```

**高级用法**：
- 使用正则表达式进行复杂搜索
- 通过include/exclude过滤文件范围
- 支持大小写敏感/不敏感搜索

### 2.2 命令执行工具

命令执行工具允许AI运行Shell命令，这是最强大但也最危险的工具类别。

#### bash工具——Shell命令执行

**功能说明**：bash工具用于执行Shell命令，支持复杂的命令组合和脚本。

**使用场景**：
- 运行构建脚本
- 执行包管理命令
- 运行测试套件
- 操作数据库

**调用示例**：
```json
{
  "tool": "bash",
  "command": "npm install",
  "timeout": 120000
}
```

**参数说明**：
- `command`（必填）：要执行的命令
- `timeout`（可选）：超时时间（毫秒），默认60000
- `workdir`（可选）：执行目录
- `env`（可选）：环境变量覆盖

**安全风险**（详见第三部分）：
- 可以执行任意系统命令
- 可能造成数据丢失或系统损坏
- 需要严格的权限控制

#### exec工具——同步命令执行

**功能说明**：exec工具与bash类似，但默认同步执行并忽略yieldMs和background参数。

**使用场景**：
- 快速执行单条命令
- 获取命令输出
- 运行一次性脚本

**与bash的区别**：
| 特性 | bash | exec |
|------|------|------|
| 执行模式 | 支持前后台 | 仅同步 |
| yieldMs参数 | 支持 | 忽略 |
| background参数 | 支持 | 忽略 |
| 适用场景 | 长时间运行任务 | 快速命令 |

### 2.3 网页工具

网页工具让AI能够与互联网交互，包括浏览器自动化和网页搜索。

#### browser工具——浏览器自动化

**功能说明**：browser工具提供完整的浏览器控制能力，包括导航、点击、输入等操作。

**使用场景**：
- 自动化Web表单填写
- 抓取网页内容
- 测试Web应用
- 进行端到端验证

**核心能力**：
- 标签页管理（打开、关闭、切换）
- 页面导航和快照
- 元素操作（点击、输入、滚动）
- 截图和PDF导出

#### web工具——网页搜索

**功能说明**：web工具提供网页搜索能力，可以快速获取互联网信息。

**使用场景**：
- 搜索技术文档
- 查找API用法
- 获取最新资讯
- 验证信息准确性

**调用示例**：
```json
{
  "tool": "web",
  "action": "search",
  "query": "OpenClaw 文档"
}
```

#### firecrawl工具——网页抓取

**功能说明**：firecrawl工具专门用于结构化网页内容抓取和解析。

**使用场景**：
- 提取网页正文内容
- 抓取结构化数据
- 生成网站地图
- 批量内容采集

### 2.4 代码工具

代码工具专门用于代码分析和编辑，集成语言服务器协议（LSP）。

#### lsp工具——语言服务器协议

**功能说明**：lsp工具提供代码分析能力，包括跳转定义、查找引用、重命名等。

**使用场景**：
- 代码导航和探索
- 重构和重命名
- 查找所有引用
- 查看类型定义

**可用操作**：
- goto_definition：跳转到定义
- find_references：查找引用
- symbols：获取文件符号
- prepare_rename：准备重命名
- rename：执行重命名

### 2.5 代理工具

代理工具用于协调多个代理之间的协作。

#### subagents工具——子代理调用

**功能说明**：subagents工具允许在一个代理中调用其他代理，实现任务分解和并行处理。

**使用场景**：
- 并行研究多个主题
- 长时间任务的后台处理
- 专业任务的委派

#### agent工具——代理通信

**功能说明**：agent工具用于向指定代理发送消息。

**使用场景**：
- 跨代理协调
- 任务传递
- 结果汇总

---

## 第三部分：技能系统

### 3.1 技能的概念与组成

技能是预配置的工具体验，针对特定任务场景优化。一个技能由三个核心要素组成：

```
技能 = 工具组合 + 专用提示词 + 使用约束
```

**工具组合**：技能封装的工具集合，定义了技能可以执行的操作。

**专用提示词**：技能包含的定制系统提示词，引导AI按照特定方式工作。

**使用约束**：技能运行时需要遵守的规则和限制。

### 3.2 技能类型

| 类型 | 说明 | 示例 |
|------|------|------|
| **内置技能** | OpenClaw核心功能 | default、read、write |
| **管理技能** | OpenClaw维护管理 | memory、sessions |
| **外部技能** | 社区贡献的扩展 | web、github |

### 3.3 技能管理命令

```bash
# 列出所有可用技能
openclaw skills list

# 查看技能详细信息
openclaw skills info web

# 查看技能安装目录
openclaw skills dir

# 从ClawHub安装技能
openclaw skills install web
openclaw skills install github

# 搜索可用的技能
openclaw skills search
```

### 3.4 技能目录结构

技能以目录形式组织，标准结构如下：

```
~/.openclaw/workspace/skills/
└── <skill-name>/
    ├── SKILL.md         # 技能说明文档
    ├── PROMPT.md        # 专用提示词
    ├── config.json5     # 技能配置
    └── tools/           # 技能专用工具（可选）
```

---

## 第四部分：工具配置

### 4.1 启用和禁用工具

工具可以在全局配置中启用或禁用：

```json5
{
  tools: {
    enabled: {
      read: true,
      write: true,
      edit: true,
      glob: true,
      grep: true,
      bash: true,
      browser: true,
      web: true
    }
  }
}
```

### 4.2 代理级别的工具限制

可以为不同代理配置差异化的工具访问权限：

```json5
{
  agents: {
    list: [
      {
        id: "restricted",
        tools: {
          allow: ["read", "write", "edit"],
          deny: ["bash", "browser", "exec"]
        }
      }
    ]
  }
}
```

### 4.3 高级工具配置

#### Bash工具配置

```json5
{
  tools: {
    bash: {
      timeout: 60000,        // 超时时间（毫秒）
      shell: "/bin/bash"     // Shell路径
    }
  }
}
```

#### 浏览器工具配置

```json5
{
  tools: {
    browser: {
      headless: true,        // 无头模式
      windowSize: [1280, 720],
      executablePath: "/usr/bin/chromium"
    }
  }
}
```

#### Web工具配置

```json5
{
  tools: {
    web: {
      search: {
        timeout: 30000,
        provider: "brave"
      }
    }
  }
}
```

---

## 第五部分：安全与权限

### 5.1 安全风险等级

理解工具的安全风险是配置权限的基础：

| 级别 | 工具 | 风险等级 | 说明 |
|------|------|----------|------|
| **安全** | read、glob、grep | 低 | 仅读取数据，无法修改系统 |
| **中等** | write、edit、web | 中 | 可修改本地数据或访问网络 |
| **高风险** | bash、exec、browser | 高 | 可执行任意操作或修改系统 |

### 5.2 沙箱模式

沙箱模式提供额外的安全隔离层：

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",
        tools: {
          allow: ["read", "write", "edit", "web"],
          deny: ["bash", "exec", "browser"]
        }
      }
    }
  }
}
```

**沙箱模式说明**：
- `non-main`模式：非主会话运行在沙箱中
- `all`模式：所有会话都运行在沙箱中
- `off`模式：禁用沙箱（默认）

### 5.3 权限提升

在需要高风险工具时，可以临时提升权限：

```json5
{
  tools: {
    elevated: {
      enabled: true,
      allowFrom: {
        whatsapp: ["+15551234567"]
      }
    }
  }
}
```

**安全警告**：权限提升存在安全风险，应谨慎使用。建议：
- 仅对可信来源启用
- 设置严格的时间限制
- 记录所有提升权限的操作

---

## 第六部分：环境配置最佳实践

### 6.1 开发环境配置

开发环境需要完整的工具支持：

```json5
{
  agents: {
    defaults: {
      tools: {
        allow: ["read", "write", "edit", "glob", "grep", "bash", "browser", "web"],
        deny: []
      }
    }
  }
}
```

### 6.2 生产环境配置

生产环境应限制危险工具：

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",
        scope: "session"
      },
      tools: {
        allow: ["read", "write", "edit", "glob", "grep"],
        deny: ["bash", "exec", "browser"]
      }
    }
  }
}
```

### 6.3 受限环境配置

对公共渠道或外部用户使用严格限制：

```json5
{
  agents: {
    list: [
      {
        id: "public",
        tools: {
          allow: ["read", "glob"],
          deny: ["bash", "exec", "browser", "write", "edit", "web"]
        }
      }
    ]
  }
}
```

---

## 第七部分：故障排除

### 7.1 工具调用失败

当工具调用失败时，按以下步骤排查：

```bash
# 检查工具是否在配置中启用
openclaw config get tools.enabled

# 查看工具相关的日志
openclaw logs --category tools

# 运行诊断命令
openclaw doctor
```

### 7.2 常见问题与解决方案

**问题一：Bash工具不可用**

症状：尝试调用bash工具时返回错误

排查步骤：
```bash
# 检查bash是否被禁用
openclaw config get agents.defaults.tools.deny

# 如果在deny列表中，移除它
openclaw config unset agents.defaults.tools.deny
```

**问题二：浏览器无法启动**

症状：browser工具返回启动错误

排查步骤：
```bash
# 检查Chrome/Chromium是否安装
which google-chrome
which chromium

# 配置浏览器路径
openclaw config set tools.browser.executablePath "/usr/bin/chromium"
```

**问题三：Web搜索失败**

症状：web工具返回网络错误

排查步骤：
```bash
# 检查API Key配置
openclaw config get tools.web.search.apiKey

# 配置正确的API Key
openclaw config set tools.web.search.apiKey "YOUR_API_KEY"
```

### 7.3 工具使用统计

查看工具调用情况：

```bash
# 查看当前会话的工具调用历史
openclaw sessions history <session-key>

# 查看工具调用统计
openclaw status --all

# 启用详细的工具日志
openclaw config set logging.tools.level "info"
```

---

## 第八部分：专家思维模型

### 8.1 工具选择决策框架

面对任务时，使用以下决策框架选择合适的工具：

```
任务类型 → 可用工具 → 风险评估 → 选择工具

1. 文件读取任务
   └── read工具 → 低风险 → 直接使用

2. 文件修改任务
   └── write/edit工具 → 中等风险 → 确认路径和内容

3. 命令执行任务
   └── bash/exec工具 → 高风险 → 检查命令、设置超时

4. 网页交互任务
   └── web/browser工具 → 中等风险 → 确认URL和操作

5. 代码分析任务
   └── lsp工具 → 低风险 → 直接使用
```

### 8.2 安全配置检查清单

配置工具权限时，使用以下检查清单：

- [ ] 是否遵循最小权限原则
- [ ] 高风险工具是否限制使用
- [ ] 生产环境是否启用沙箱
- [ ] 外部渠道是否有严格限制
- [ ] 是否记录工具使用日志
- [ ] 权限提升是否有审计机制

### 8.3 性能优化提示

优化工具使用效率：

1. **批量操作**：使用glob和grep一次性处理多个文件
2. **限制范围**：使用limit和offset避免读取大文件
3. **并行执行**：使用subagents并行执行独立任务
4. **缓存结果**：避免重复调用相同的工具

---

## 适用场景速查

| 场景 | 推荐工具 | 配置建议 |
|------|----------|----------|
| 浏览代码库 | read + glob + grep | 开发环境配置 |
| 编写文档 | write + edit | 启用write和edit |
| 运行测试 | bash | 仅开发环境，限制命令 |
| 网页搜索 | web | 配置API Key |
| 自动化Web操作 | browser | 高风险，需严格控制 |
| 并行处理 | subagents | 配置子代理模型限制 |
| 代码重构 | lsp + edit | 开发环境配置 |

---

## 相关文档

- [CLI参考](/zh-CN/cli)——所有命令
- [配置参考](/zh-CN/config/reference)——完整配置选项
- [技能开发](/zh-CN/tools/creating-skills)——创建自定义技能
- [浏览器工具](/zh-CN/tools/browser)——浏览器自动化
- [执行工具](/zh-CN/tools/exec)——命令执行

---

**重要提示**：工具和技能是AI助手能力的延伸。合理配置工具权限，既能让助手发挥强大能力，又能确保系统安全。建议在开发环境中充分测试配置，确认功能正常后再部署到生产环境。